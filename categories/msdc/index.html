<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Seth Dang博客</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="技术博客与知识分享">
    <meta name="generator" content="Hugo 0.150.0">
    
    
    
      <meta name="robots" content="index, follow">
    
    <meta name="author" content="Seth Dan">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.2438bcafd7af9675c426d1a4afcd16cfff18e4e10f401071e45b5ccd3be40a0d.css" >




    


    
      

    

    
    
      <link href="/categories/msdc/index.xml" rel="alternate" type="application/rss+xml" title="Seth Dang博客" />
      <link href="/categories/msdc/index.xml" rel="feed" type="application/rss+xml" title="Seth Dang博客" />
      
    

    
      <link rel="canonical" href="/categories/msdc/">
    

    <meta property="og:url" content="/categories/msdc/">
  <meta property="og:site_name" content="Seth Dang博客">
  <meta property="og:title" content="MSDC">
  <meta property="og:description" content="技术博客与知识分享">
  <meta property="og:locale" content="zh_CN">
  <meta property="og:type" content="website">

  <meta itemprop="name" content="MSDC">
  <meta itemprop="description" content="技术博客与知识分享">
  <meta itemprop="datePublished" content="2010-05-16T21:35:41+08:00">
  <meta itemprop="dateModified" content="2010-05-16T21:35:41+08:00">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="MSDC">
  <meta name="twitter:description" content="技术博客与知识分享">

      
    
	
  </head><body class="ma0 avenir bg-near-white production">

    

  <header>
    <div class="pb3-m pb6-l bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Seth Dang博客
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv3 ph3 ph4-ns">
        <h1 class="f2 f-subheadline-l fw2 light-silver mb0 lh-title">
          MSDC
        </h1>
        
      </div>
    </div>
  </header>


    <main class="pb7" role="main">
      
  <article class="cf pa3 pa4-m pa4-l">
    <div class="measure-wide-l center f4 lh-copy nested-copy-line-height nested-links mid-gray">
      <p>Below you will find pages that utilize the taxonomy term “MSDC”</p>
    </div>
  </article>
  <div class="mw8 center">
    <section class="flex-ns mt5 flex-wrap justify-around">
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E6%9C%AC%E5%9C%B0%E5%9F%9F%E7%BB%84%E5%92%8C%E5%85%A8%E5%B1%80%E7%BB%84%E7%9A%84%E5%8C%BA%E5%88%AB/" class="link black dim">
        本地域组和全局组的区别
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>全局组： 只能在创建该全局组的域上进行添加用户账户和全局组，而且全局组可以嵌套在其他组中。可以将某个全局组添加到同一个域上的另一个全局组中，或添加到其他域的通用组和域本地组中（注意这里不能它加入到不同域的全局组中，全局组只能在创建它的域中添加用户和组）。虽然可以利用全局组授予访问任何域上的资源的权限，但一般不直接用它来进行权限管理。<br>
本地域组： 可以从任何域添加用户账户、通用组和全局组。域本地组不能嵌套于其他组中。它主要是用于授予位于本域资源的访问权限。<br>
通用组：通用组是集合了上面两种组的优点，即可以从任何域中添加用户和组，可以嵌套于其他域组中。但是只能在域处于本机模式的时候使用，也就是说所有域控都必须是2000以上系统。<br>
比如：有两个域，A和B，A中的5个财务人员和B中的3个财务人员都需要访问B中的“FINA”文件夹，这时，可以在B中建一个DL，因为DL的成员可以来自所有的域，然后把这8个人都加入这个DL，并把FINA的访问权赋给DL。这样做的坏处是什么呢？因为DL是在B域中，所以管理权也在B域，如果A域中的5个人变成6个人，那只能A域管理员通知B域管理员，将DL的成员做一下修改，B域的管理员太累了。<br>
这时候，我们改变一下，在A和B域中都各建立一个全局组（G），然后在B域中建立一个DL，把这两个G都加入B域中的DL中，然后把FINA的访问权赋给DL。哈哈，这下两个G组都有权访问FINA文件夹了，是吗？组嵌套造成权限继承嘛！这时候，两个G分布在A和B域中，也就是A和B的管理员都可以自己管理自己的G啦，只要把那5个人和3个人加入G中，就可以了！以后有任何修改，都可以自己做了，不用麻烦B域的管理员！这就是AGDLP。<br>
注：A表示用户账号，G表示全局组，U表示通用组，DL表示域本地组，P表示资源权限。A-G-DL-P策略是将用户账号添加到全局组中，将全局组添加到域本地组中，然后为域本地组分配资源权限。</p>
<p>本地域组的成员可以来自所有域的用户和组，但其作用域只能是当前域<br>
全局组的成员只能来自当前域的用户和组，而作用域可以是所有的域</p>
<p>本地域组的权利是自身的，全局域的权利是来自其属于的本地域组的</p>
<p>打个比方，现在有两个域domainA,domainB,用户UseA,UseB. 在DomainA上有一个文件夹Resource.UseB属于domainB,他想访问Resource.<br>
这个时候就应该先在domainB上建一个全局组GlobalB,然后将UseB加入GlobalB,然后到Domain域中建立一个域本地组LocalA,将全局组GlobalB加入域本地组LocalA,再针对域本地组LocalA授权对Resource的访问权限。</p>
    </div>
    <a href="/posts/%E6%9C%AC%E5%9C%B0%E5%9F%9F%E7%BB%84%E5%92%8C%E5%85%A8%E5%B1%80%E7%BB%84%E7%9A%84%E5%8C%BA%E5%88%AB/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E9%87%8D%E5%91%BD%E5%90%8Dad%E7%BD%91%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/" class="link black dim">
        重命名AD网域的方式
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>网域<br>
提升域和林的功能级别<br>
只能重命名其中所有的域控制器都在运行 Windows Server 2003 并且林功能级别已被提升到 Windows Server 2003 的林中的域。<br>
提升域功能级别<br>
按下列步骤提升域功能级别：<br>
1、打开【Active Directory 用户和计算机】。在控制台树中，右键单击【Active Directory 用户和计算机】节点，然后单击【提升域的功能级别】。<br>
2、在【选择可用的域功能级别】中单击“Windows Server 2003”，然后单击【提升】。</p>
<p>提升林功能级别<br>
按下列步骤提升林功能级别：<br>
1、打开【Active Directory 域和信任关系】。在控制台树中，右键单击【Active Directory 域和信任关系】节点，然后单击【提升林的功能级别】。<br>
2、在【选择可用的林功能级别】中单击“Windows Server 2003”，然后单击【提升】。<br>
实现域名更改<br>
现在我们以将域名esstest.com更改为sky.com为例进行讲解。更改域名需按以下步骤进行：<br>
1、在DNS中建立新域名的活动目录集成区域-SKY.COM</p>
<p>2、将Windows Server 2003的安装光盘插入光驱，将“\VALUEADD\MSFT\MGMT”下的DOMREN目录复制到系统的C盘根目录下。<br>
3、在打开的“命令提示符”窗口中的命令行下使用CD命令进入DOMREN目录后，输入“Rendom /list”命令为当前林生成描述信息（将会使用XML编码结构将信息写入到一个输出文件中，默认文件名为domainlist.xml）。该文件包含了一些列表，列出了林中的所有域和应用程序目录分区，以及它们相应的DNS和NetBIOS名（应用程序目录分区没有NetBIOS名）<br>
4、因为“Rendom /list”命令生成的当前林的描述文件是一个文本文件，所以现在可以使用系统中的“记事本”功能对它进行编辑。按下“Ctrl+H”键，在弹出的“替换”对话框中将所有的“esstest.com”替换成新域的名称“sky.cn”，并将NetBIOS的名称也进行相应的更换后，将该文件存盘。<br>
5、接着返回到命令符提示窗口，在命令行中输入“Rendom /upload”命令。这条命令在运行后，域的命名主控会做出一些修改，以便为重命名操作的实际执行做好准备。<br>
提示： upload命令执行的操作和目录因此而发生的变化都是为将来的重命名操作做准备。在本步骤中不对域名进行任何的修改。</p>
<p>6、接着再依次输入“Rendom /prepare”命令和“Rendom /execute”命令。<br>
“Rendom /prepare”命令主要是用于校验连到该域的所有DC是否准备就绪，如果看到有“Successfully”信息，那么则表示连接各DC成功。此外，本测试还对每台DC进行授权情况检查，以确定运行rendom /prepare命令的用户是否得到了授权执行重命名指令。如果用户没有得到“写”授权，命令将失败，并产生一个错误。</p>
<p>“Rendom /execute”命令用于发出正式更改域名的指令，如果看到有“Successfully”的信息，那么表示域的重命名过程成功完成了。</p>
<p>7、在上述命令执行完毕后，系统将会自动关闭重启。此外还必需对域中所有计算机执行两遍手工关机，第一次关机用于使新域成员资格生效；第二次关机则用于将计算机的DNS后缀自动转换为新域名称。</p>
<p>提示：如果DNS后缀没有自动更改，请右击“我的电脑”图标，在弹出的菜单中选择“属性”，切换到“计算机名”选项卡设置界面后，点击“更改”按钮并根据提示操作即可。</p>
<p>8、调整组策略：因为在完成域的重命名应用后，希望组策略中的相关设置能够继续得到应用。所以还需要在命令符提示窗口的命令行中输入如下命令：<br>
gpfixup /olddns:esstest.com /newdns:sky.com /oldnb:SHYZHONG /newnbOVEBOOK /dc:sky.com</p>
<p>9、在执行上述命令后（中间域名部分请自行根据实际情况进行修改），如果看到“Start fixing non-site group policy links”信息，则表示上述命令已经得到了成功执行。<br>
10、删除原域名：<br>
这个操作只需使用“Rendom /clean”命令即可轻松完成从Active Directory中删除原域名的操作了。在成功运行了“Rendom /clean”命令后，新森林便准备就绪，可以进行下一次的森林结构调整工作。这一点只需从“Active Directory 域和信任关系”窗口就可以看出来了。</p>
    </div>
    <a href="/posts/%E9%87%8D%E5%91%BD%E5%90%8Dad%E7%BD%91%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%9F%90%E5%88%86%E5%85%AC%E5%8F%B8%E4%B8%BB%E5%9F%9F%E6%8E%A7%E5%AE%9E%E5%BD%95/" class="link black dim">
        灾难恢复某分公司主域控实录 
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>某分公司服务器崩溃,目前无法接收邮件等.<br>
首先讲讲现有环境:<br>
NS1:主域控,兼DNS和mdaemon服务器和erp数据库服务器以及财务系统<br>
NS2:副域控兼文件服务器,未设置为GC(全局编录)<br>
遭遇故障:NS1中了病毒,所有exe变成描述为MFC Application的应用程序,exe图标为灰色的小熊,无法登入系统,不会出现登陆提示框,安全模式无法进入.<br>
遂决定:<br>
1. 将NS1备份数据库资料和mdaemon资料以及财务资料<br>
2. 然后重装2003<br>
3. 将ns2提示为主域<br>
4. 将ns1加入域<br>
5. 升级ns1为主域<br>
6. 重新安装sql并加载erp数据库<br>
7. 重新共享财务系统的文件<br>
8. 重新安装mdaemon并用备份覆盖新的安装目录<br>
以下为实录和一些侦错<br>
1. 首先使用PE进入NS1,然后备份erp所在目录的data下面的mdf和ldf文件这些数据库文件,以及将mdaemon的目录和财务系统的目录全部拷贝至其他磁盘,然后全盘格式化NS1的所有磁盘<br>
2. 安装全新的2003,打上SP2补丁,安装好杀软.<br>
3.在NS2上使用ntdsutil工具将没用的ns1清理掉,在清理的时候ntdsutil工具自动识别出ns2为最后的域控,提示是否转移角色,在转移过程中,转移失败,貌似是因为ns2不是GC,将ns2设置为GC后,重新使用ntdsutil工具捕获FSMO到NS2成功(至于ntdsutil工具和mmc转移fsmo在我的博文有介绍,这里就不说了)<br>
4. 在NS2上安装DNS,设置betapvc区域为集成区域,区域自动识别为该区域只有NS1一个域控,然后将ns1和ns1的首选dns都设置为ns2的ip<br>
5. 将NS1加入网域,并升级成为副域控<br>
6. 使用mmc图形化界面将fsmo重新捕获到NS1上<br>
7. 重启NS1<br>
8. 发现ns1打开组策略什么都没有,全部提示文件不存在,大惊,net share发现无netlogon共享和sysvol共享<br>
9.于是查看windows目录下是否存在sysvol文件夹,发现存在,于是第一步重启ntfrs和netlogon服务,发现仍然无法加载sysvol共享和netlogon共享,于是第二步删除sysvol然后重建(博文有介绍灾难恢复域控后未开启sysvol一文)然后加载OK,但是组策略被清空了,按照我的博文说的将ns2上的sysvol里面的东西全部拷贝到NS1,组策略恢复正常,OK,复制也OK<br>
10.在ns1上安装dns,然后新建网域的原区域,并设置为主要区域,但是不要选ad集成区域,然后停止ns1的dns服务,再打开c:\windows\system32\config\netlogon.dns文件,用记事本打开,将里面的东西全部复制到c:\windows\system32\dns\下面有个你新建的你域名.dns这个文件,也用记事本打开,然后将刚才复制的东西,粘贴到最下面.然后保存,然后再将该区域更改为ad集成区域,这样我们的dns也灾难恢复过来了.<br>
11. 将ns1和ns2的首选dns重新更改为ns1的IP<br>
12. 在NS1上安装sql<br>
13. 安装erp,然后停止sql服务,将erp的旧数据库覆盖新安装erp产生的新数据库<br>
14. 启动sql服务,erp恢复正常,然后重新共享财务系统需要的文件夹,财务系统恢复正常.<br>
15. 重新安装mdaemon,然后将之前备份的目录全部覆盖到新目录,mdaemon也恢复正常.<br>
OK,总算完成了,有不明白的再与我联络讨论.</p>
    </div>
    <a href="/posts/%E7%81%BE%E9%9A%BE%E6%81%A2%E5%A4%8D%E6%9F%90%E5%88%86%E5%85%AC%E5%8F%B8%E4%B8%BB%E5%9F%9F%E6%8E%A7%E5%AE%9E%E5%BD%95/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E7%B3%BB%E7%BB%9F%E7%A6%81%E7%94%A8u%E7%9B%98%E7%AD%96%E7%95%A5%E8%BD%AC/" class="link black dim">
        系统禁用U盘策略（转）
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>如果计算机上尚未安装 USB 存储设备</p>
<p>如果计算机上尚未安装 USB 存储设备，请向用户或组分配对下列文件的“拒绝”权限：</p>
<p>%SystemRoot%\Inf\Usbstor.pnf</p>
<p>%SystemRoot%\Inf\Usbstor.inf</p>
<p>这样，用户将无法在计算机上安装 USB 存储设备。 要向用户或组分配对 Usbstor.pnf 和 Usbstor.inf 文件的“拒绝”权限，请按照下列步骤操作：</p>
<p>启动 Windows 资源管理器，然后找到 %SystemRoot%\Inf 文件夹。</p>
<p>右键单击“Usbstor.pnf”文件，然后单击“属性”。</p>
<p>单击“安全”选项卡。</p>
<p>在“组或用户名称”列表中，单击要为其设置“拒绝”权限的用户或组。</p>
<p>在“用户名或组名 的权限”列表中，单击以选中“完全控制”旁边的“拒绝”复选框，然后单击“确定”。</p>
<p>右键单击“Usbstor.inf”文件，然后单击“属性”。</p>
<p>单击“安全”选项卡。</p>
<p>在“组或用户名称”列表中，单击要为其设置“拒绝”权限的用户或组。</p>
<p>在“用户名或组名 的权限”列表中，单击以选中“完全控制”旁边的“拒绝”复选框，然后单击“确定”。</p>
<p>如果计算机上已经安装了 USB 存储设备</p>
<p>警告： “注册表编辑器”使用不当可导致严重问题，可能需要重新安装操作系统。Microsoft 不能保证您可以解决因“注册表编辑器”使用不当而导致的问题。使用注册表编辑器需要您自担风险。 如果计算机上已经安装了 USB 存储设备，请将以下注册表项中的“Start”值设置为 4：</p>
<p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\UsbStor</p>
<p>这样，当用户将 USB 存储设备连接到计算机时，该设备将无法运行。要设置“Start”的值，请按照下列步骤操作：</p>
<p>单击“开始”，然后单击“运行”。</p>
<p>在“打开”框中，键入“regedit”，然后单击“确定”。</p>
<p>找到并单击下面的注册表项：</p>
<p>HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\UsbStor</p>
<p>在右窗格中，双击“Start”。</p>
<p>在“数值数据”框中，键入 4，单击“十六进制”（如果尚未选中），然后单击“确定”。</p>
<p>退出“注册表编辑器”。<br>
至此，USB禁止策略实施成功。</p>
<p>屏蔽U盘</p>
<p>1、在域控制器上打开Active Directory用户和计算机，找到您要屏蔽U盘的组织单位（Organizational Unit 简称OU），右键查看此组织单位的属性，点击组策略页面，新建一个组策略，命名并保存为“屏蔽U盘”，建好后，双击“屏蔽U盘”（必需先打开一次，否则系统不会拷贝那几个模板文件），在打开的标题为“组策略”的窗口的左边，按以下顺序定位“用户配置－管理模板-Windows组件-Windows资源管理器”，选中Windows资源管理器</p>
<p>我们可以看到有“隐藏我的电脑中的这些指定的驱动器”和“防止从我的电脑访问驱动器”，双击打开其中一项策略，选择“启用”，下面的下拉框会变亮，单击下拉框，如图2所示，您会发现系统提供了7种限制访问驱动器号的组合，其中也包括了“不限制驱动器”，显然，这些组合不能满足我们的要求（因为U盘的盘符通常是排在最后的，而且现在的硬盘比较大，少则也有三四个分区）。</p>
<p>2、在域控制器上打开Active Directory 用户和计算机，在刚才我们新建的“屏蔽U盘”策略上单击右键选择查看属性，在如图3所示的位置找到&quot;屏蔽U盘&quot;的组策略的唯一的名称，此名称为一长串数字和字母组成，本例中为{82F86A8E-B345-4DDC-A304-E448F6E900A9}，记下此字符串。</p>
<p>3、打开系统盘，定位以{82F86A8E-B345-4DDC-A304-E448F6E900A9}命名的文件夹，此文件夹位于“C:WINNTSYSVOLbaling.com.cnPolicies”下（盘符依赖于您安装的操作系统所在的分区），注意其中baling.com.cn是您的Windows 2000的域名，打开{82F86A8E-B345-4DDC-A304-E448F6E900A9}目录，找到ADM目录下的system.adm文件，此文件是我们在实施组策略的模板文件，是一个纯文本文件，可用记事本打开，找到下面这两段代码：</p>
<ul>
<li>POLICY !!NoDrives<br>
EXPLAIN !!NoDrives_Help<br>
PART !!NoDrivesDropdown DROPDOWNLIST NOSORT REQUIRED<br>
VALUENAME &ldquo;NoDrives&rdquo;<br>
ITEMLIST<br>
NAME !!ABOnly VALUE NUMERIC 3<br>
NAME !!COnly VALUE NUMERIC 4<br>
NAME !!DOnly VALUE NUMERIC 8<br>
NAME !!ABConly VALUE NUMERIC 7<br>
NAME !!ABCDOnly VALUE NUMERIC 15<br>
NAME !!ALLDrives VALUE NUMERIC 67108863 DEFAULT<br>
; low 26 bits on (1 bit per drive)<br>
NAME !!RestNoDrives VALUE NUMERIC 0<br>
END ITEMLIST<br>
END PART<br>
END POLICY</li>
<li>POLICY !!NoViewOnDrive<br>
EXPLAIN !!NoViewOnDrive_Help<br>
PART !!NoDrivesDropdown DROPDOWNLIST NOSORT REQUIRED<br>
VALUENAME &ldquo;NoViewOnDrive&rdquo;<br>
ITEMLIST<br>
NAME !!ABOnly VALUE NUMERIC 3<br>
NAME !!COnly VALUE NUMERIC 4<br>
NAME !!DOnly VALUE NUMERIC 8<br>
NAME !!ABConly VALUE NUMERIC 7<br>
NAME !!ABCDOnly VALUE NUMERIC 15<br>
NAME !!ALLDrives VALUE NUMERIC 67108863 DEFAULT （C/D ONLY=67108851）<br>
; low 26 bits on (1 bit per drive)<br>
NAME !!RestNoDrives VALUE NUMERIC 0<br>
END ITEMLIST<br>
END PART<br>
END POLICY</li>
</ul>
<p>说明：这是两个策略，第一个!!NoDrive，它的作用是在我的电脑中不显示指定的驱动器名，驱动器号代表的所有驱动器不出现在标准的打开对话框上，但是在地址栏中输入盘符或新建一个指向硬盘盘符的快捷方式，用户仍然可以访问该驱动器；第二个!!NoViewOnDrive的作用是阻止用户访问驱动器。可以阻止上述情况的出现，但是仅仅用第二个的话，用户可以看见该驱动器的盘符，但不能访问，一般情况，两个同时使用，可以达到比较理想的效果。</p>
    </div>
    <a href="/posts/%E7%B3%BB%E7%BB%9F%E7%A6%81%E7%94%A8u%E7%9B%98%E7%AD%96%E7%95%A5%E8%BD%AC/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/windows%E6%97%A5%E8%AA%8C%E6%96%87%E4%BB%B6%E5%AE%8C%E5%85%A8%E5%85%A8%E8%A7%A3%E8%AE%80%E8%BD%89%E5%B8%96/" class="link black dim">
        Windows日誌文件完全全解讀(轉帖)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>日誌文件，它記錄著Windows系統及其各種服務運行的每個細節，對增強Windows的穩定和安全性，起著非常重要的作用。但許多用戶不注意對它保護，一些“不速之客”很輕易就將日誌文件清空，給系統帶來嚴重的安全隱患。</p>
<p>一、什麼是日誌文件</p>
<p>日誌文件是Windows系統中一個比較特殊的文件，它記錄著Windows系統中所發生的一切，如各種系統服務的啟動、運行、關閉等信息。Windows日誌包括應用程序、安全、系統等幾個部分，它的存放路徑是“%systemroot%system32config”，應用程序日誌、安全日誌和系統日誌對應的文件名為AppEvent.evt、SecEvent.evt和SysEvent.evt。這些文件受到“Event Log（事件記錄）”服務的保護不能被刪除，但可以被清空。</p>
<p>二、如何查看日誌文件</p>
<p>在Windows系統中查看日誌文件很簡單。點擊“開始→設置→控制面板→管理工具→事件查看器”，在事件查看器窗口左欄中列出本機包含的日誌類型，如應用程序、安全、系統等。查看某個日誌記錄也很簡單，在左欄中選中某個類型的日誌，如應用程序，接著在右欄中列出該類型日誌的所有記錄，雙擊其中某個記錄，彈出“事件屬性”對話框，顯示出該記錄的詳細信息，這樣我們就能準確的掌握系統中到底發生了什麼事情，是否影響Windows的正常運行，一旦出現問題，即時查找排除。</p>
<p>三、Windows日誌文件的保護</p>
<p>日誌文件對我們如此重要，因此不能忽視對它的保護，防止發生某些“不法之徒”將日誌文件清洗一空的情況。</p>
<p>1． 修改日誌文件存放目錄</p>
<p>Windows日誌文件默認路徑是“%systemroot%system32config”，我們可以通過修改註冊表來改變它的存儲目錄，來增強對日誌的保護。<br>
點擊“開始→運行”，在對話框中輸入“Regedit”，回車後彈出註冊表編輯器，依次展開“HKEY_LOCAL_MACHINE/SYSTEM/CurrentControlSet/Services/Eventlog”後，下面的Application、Security、System幾個子項分別對應應用程序日誌、安全日誌、系統日誌。<br>
筆者以應用程序日誌為例，將其轉移到“d:\cce”目錄下。選中Application子項,在右欄中找到File鍵，其鍵值為應用程序日誌文件的路徑“%SystemRoot%system32configAppEvent.Evt”，將它修改為“d:cceAppEvent.Evt”。接著在D盤新建“CCE”目錄，將“AppEvent.Evt”拷貝到該目錄下，重新啟動系統，完成應用程序日誌文件存放目錄的修改。其它類型日誌文件路徑修改方法相同，只是在不同的子項下操作。<br>
2． 設置文件訪問權限</p>
<p>修改了日誌文件的存放目錄後，日誌還是可以被清空的，下面通過修改日誌文件訪問權限，防止這種事情發生，前提是Windows系統要採用NTFS文件系統格式。</p>
<p>右鍵點擊D盤的CCE目錄，選擇“屬性”，切換到“安全”標簽頁後，首先取消“允許將來自父系的可繼承權限傳播給該對象”選項勾選。接著在賬號列表框中選中“Everyone”賬號，只給它賦予“讀取”權限；然後點擊“添加”按鈕，將“System”賬號添加到賬號列表框中，賦予除“完全控制”和“修改”以外的所有權限，最後點擊“確定”按鈕。這樣當用戶清除Windows日誌時，就會彈出錯誤對話框。</p>
<p>四、Windows日誌實例分析</p>
<p>在Windows日誌中記錄了很多操作事件，為了方便用戶對它們的管理，每種類型的事件都賦予了一個惟一的編號，這就是事件ID。</p>
<p>1． 查看正常開關機記錄</p>
<p>在Windows系統中，我們可以通過事件查看器的系統日誌查看計算機的開、關機記錄，這是因為日誌服務會隨計算機一起啟動或關閉，並在日誌中留下記錄。這裏我們要介紹兩個事件ID“6006和6005”。6005表示事件日誌服務已啟動，如果在事件查看器中發現某日的事件ID號為6005的事件，就說明在這天正常啟動了Windows系統。6006表示事件日誌服務已停止，如果沒有在事件查看器中發現某日的事件ID號為6006的事件，就表示計算機在這天沒有正常關機，可能是因為系統原因或者直接切斷電源導致沒有執行正常的關機操作。</p>
<p>2． 查看DHCP配置警告信息</p>
<p>在規模較大的網絡中，一般都是採用DHCP服務器配置客戶端IP地址信息，如果客戶機無法找到DHCP服務器，就會自動使用一個內部的IP地址配置客戶端，並且在Windows日誌中產生一個事件ID號為1007的事件。如果用戶在日誌中發現該編號事件，說明該機器無法從DHCP服務器獲得信息，就要查看是該機器網絡故障還是DHCP服務器問題。</p>
    </div>
    <a href="/posts/windows%E6%97%A5%E8%AA%8C%E6%96%87%E4%BB%B6%E5%AE%8C%E5%85%A8%E5%85%A8%E8%A7%A3%E8%AE%80%E8%BD%89%E5%B8%96/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/win-xp-%E7%B5%84%E7%AD%96%E7%95%A5-%E6%87%89%E7%94%A8%E5%85%A8%E9%81%8E%E7%A8%8B%E8%BD%89%E5%B8%96/" class="link black dim">
        win XP 組策略-應用全過程(轉帖)
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>一、組策略基礎<br>
1.什麼是組策略<br>
註冊表是Windows系統中保存系統軟件和應用軟件配置的數據庫，而隨著Windows功能越來越豐富，註冊表裏的配置項目也越來越多，很多配置都可以自定義設置，但這些配置分佈在註冊表的各個角落，如果是手工配置，可以想像是多麼困難和煩雜。而組策略則將系統重要的配置功能彙集成各種配置模塊，供用戶直接使用，從而達到方便管理計算機的目的。</p>
<p>其實簡單地說，組策略設置就是在修改註冊表中的配置。當然，組策略使用了更完善的管理組織方法，可以對各種對象中的設置進行管理和配置，遠比手工修改註冊表方便、靈活，功能也更加強大。</p>
<p>2.組策略的版本<br>
對於Windows 9X/NT用戶來說，都知道“系統策略”的概念，其實組策略就是系統策略的高級擴展，它是自Windows 9X/NT的“系統策略”發展而來的，具有更多的管理模板、更靈活的設置對象及更多的功能，目前主要應用於Windows 2000/XP/2003操作系統中。</p>
<p>早期系統策略的運行機制是通過策略管理模板，定義特定的POL(通常是Config.pol)文件。當用戶登錄時，它會重寫註冊表械納柚彌怠５比唬低巢唄員嗉饕倉С侄緣鼻白⒉岜淼男薷模磽庖倉С至油緙撲慊⒍雲渥⒉岜斫猩柚謾?br&gt;<br>
而組策略及其工具，則是對當前註冊表進行直接修改。顯然，Windows 2000/XP/2003系統的網絡功能是其最大的特色之處，所以其網絡功能自然是不可少的，因此組策略工具還可以打開網絡上的計算機進行配置，甚至可以打開某個Active Directory(活動目錄)對象(即站點、域或組織單位)並對其進行設置。這是以前“系統策略編輯器”工具無法做到的。</p>
<p>當然，無論是“系統策略”還是“組策略”，它們的基本原理都是修改註冊表中相應的配置項目，從而達到配置計算機的目的，只是它們的一些運行機制發生了變化和擴展而已。</p>
<p>3.在Windows XP中運行組策略<br>
在Windows 2000/XP/2003系統中，系統默認已經安裝了組策略程序，在“開始”菜單中，單擊“運行”選項，在打開的對話框中輸入“gpedit.msc”並確定，即可運行組策略。</p>
<p>使用上面的方法，打開的組策略對象是當前的計算機，而如果需要配置其他的計算機組策略對象，則需要將組策略作為獨立的MMC管理單元打開：</p>
<p>(1)打開Microsoft管理控制臺(可在“開始”菜單的“運行”對話框中直接輸入“MMC”並確定)。</p>
<p>(2)單擊“文件→添加/刪除管理單元”菜單命令，在打開的對話框中單擊“添加”按鈕。</p>
<p>(3)在“可用的獨立管理單元”對話框中，單擊“組策略”選項，然後單擊“添加”按鈕。</p>
<p>(4)在“選擇組策略對象”對話框中，單擊“本地計算機”選項編輯本地計算機對象，或通過單擊“瀏覽”查找所需的組策略對象。</p>
<p>(5)單擊“完成”按鈕，組策略管理單元即打開要編輯的組策略對象。</p>
<p>(6)在左窗格中定位需要更改的選項的位置，在右窗格中右鍵單擊需要更改的具體選項，單擊“屬性”命令，即可打開其屬性對話框，從中選擇“已啟用”、“未配置”、“已禁用”選項即可對計算機策略進行管理。</p>
<p>4.組策略中的管理模板<br>
在Windows 2000/XP/2003中包含幾個ADM文件。這些文件是文本文件，被稱為“管理模板”，它們為組策略管理單元的控制樹中“管理模板”文件夾下的項目提供策略信息。</p>
<p>在Windows 2000/XP/2003中，默認的Admin.adm管理模板位於系統文件夾的INF文件夾中，包含了默認安裝下的4個模板文件，分別為：</p>
<p>(1)System.adm：默認安裝在“組策略”中，用於系統設置。</p>
<p>(2)Inetres.adm：默認安裝在“組策略”中，用於Internet Explorer(IE)策略設置。</p>
<p>(3)Wmplayer.adm：用於Windows Media Player設置。</p>
<p>(4)Conf.adm：用於NetMeeting設置。</p>
<p>在策略管理控制臺中，可以多次添加“策略模板”，下面讓我們來看看具體操作：</p>
<p>首先運行“組策略”程序，然後選擇“計算機配置”或者“用戶配置”下的“管理模板”，單擊鼠標右鍵，選擇“添加/刪除模板”命令，然後在打開的對話框中單擊“添加”按鈕，在打開的對話框中選擇相應的ADM文件。單擊“打開”按鈕，則在系統策略編輯器中打開選定的腳本文件，並等待用戶執行。</p>
<p>返回到“組策略”編輯器主界面後，依次打開目錄“本地計算機策略→用戶配置→管理模板”選項，再單擊相應的目錄樹，就會看到我們新添加的管理模板所產生的配置項目了。</p>
<p>注意：下面的操作均在Windows XP中進行。</p>
<p>二、個性化我的電腦<br>
1.刪除“開始”菜單中的“文檔”菜單項<br>
在多人使用的計算機中，有的用戶不希望其他用戶看到自己曾經編輯過的文檔或其他信息。因此，為了刪除用於記錄歷史文檔的“文檔”菜單項，我們可以通過修改組策略來實現。</p>
<p>位置：\用戶配置\管理模板\任務欄和“開始”菜單<br>
啟用此設置，則系統保存“文檔”快捷方式，但不在“文檔”菜單中顯示它們。如果以後禁用此設置或把它設置為未配置，則啟用設置之前及其生效之時保存的“文檔”快捷方式會出現在“文檔”菜單項中。</p>
<p>注意：此設置不會阻止Windows程序在最近打開的文檔中顯示快捷方式。</p>
<p>另外，你也可以設置在退出系統時自動清除最近打開的文檔的歷史記錄。</p>
<p>位置：\用戶配置\管理模板\任務欄和“開始”菜單<br>
如果禁用該策略設置，系統就會在用戶退出時刪除快捷方式。因此，用戶登錄時，“開始”菜單上的文檔菜單總是空的。如果禁用或不配置此設置，系統將保留文檔快捷方式，並且用戶登錄時的文檔菜單看起來與用戶退出系統時完全相同。</p>
<p>注意：系統在\Documents and Settings&lt;用戶名&gt;\Recent文件夾中的用戶配置文件中保存文檔快捷方式。</p>
<p>2.刪除“開始”菜單中的“運行”菜單項<br>
在“開始”菜單中有“運行”菜單項，可以輸入程序名稱來啟動程序。我們可以將“運行”菜單項從“開始”菜單中刪除。</p>
<p>位置：\用戶配置\管理模板\任務欄和“開始”菜單<br>
如果啟用該設置，發生如下更改：</p>
<p>(1)“運行”命令從“開始”菜單中刪除。</p>
<p>(2)新建任務(運行)命令從任務管理器刪除。</p>
<p>(3)阻止用戶在IE地址欄中輸入下列項：</p>
<p>UNC路徑：\\＜server＞\＜share＞。</p>
<p>訪問本地驅動器：例如，C:。</p>
<p>訪問本地文件夾：例如，\temp＞。</p>
<p>同時，使用WIN+R組合鍵將無法顯示“運行”對話框。如果禁用或不配置此設置，用戶可以訪問“開始”菜單和任務管理器的“運行”命令，以及使用IE地址欄。</p>
<p>注意：這個策略只影響指定的界面。不會防止用戶使用其他方法運行程序。</p>
<p>3.給“開始”菜單減肥<br>
如果覺得Windows的“開始”菜單太臃腫，你完全可以通過組策略設置將不需要的菜單項從“開始”菜單中刪除。</p>
<p>位置：\用戶配置\管理模板\任務欄和“開始”菜單<br>
在組策略右側窗格中，提供“從‘開始’菜單刪除用戶文件夾”、“刪除到‘Windows Update’的訪問和鏈接”、從‘開始’菜單刪除公用程序組、從‘開始’菜單中刪除“我的文檔”圖標等配置項目。你只要將不需要的菜單項所對應的策略啟用即可。</p>
    </div>
    <a href="/posts/win-xp-%E7%B5%84%E7%AD%96%E7%95%A5-%E6%87%89%E7%94%A8%E5%85%A8%E9%81%8E%E7%A8%8B%E8%BD%89%E5%B8%96/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/%E7%94%A8%E6%B4%BBwin2000%E5%9F%9F%E6%8E%A7%E5%88%B6%E5%99%A8/" class="link black dim">
        用活Win2000域控制器
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>也许不少人会认为域控制器的使用，是非常简单的一件事情；但当你与域控制器进行了“亲密”接触之后，你会发现事实并非想象的那样简单，因为在实际管理域控制器的过程中，你或许会碰到许多特殊要求；面对不同的要求，你需要对域控制器进行个性化的控制和管理。</p>
<p><strong>巧“借”域来装程序</strong></p>
<p>在包含有多台工作站的局域网中，为每一台工作站安装相同的应用程序，看似是一件轻松而又简单的事情，其实实际操作起来很费时间，如果同时在每台工作站中安装多个应用程序的话，那工作量就更大了！为了能快速、高效地将多个应用程序安装到每台工作站中，你可以按照下面的方法来进行批量操作：</p>
<p>首先将局域网服务器升级为域服务器，如果你的服务器还没有完成升级的话，那不妨参考相关资料完成升级任务。倘若这里的网络服务器已经完成了升级操作，而且升级好的域服务器名称为“ad.ycsti.cn”；</p>
<p>考虑到是给工作站安装应用程序，因此你先必须配置好应用程序的安装脚本，然后指定工作站在登录成功后自动调用程序安装脚本，从而实现自动安装应用程序的目的。在配置应用程序安装脚本时，可以先打开域服务器中记事本之类的文本编辑工具，然后在编辑界面中输入下面的源代码：</p>
<p>@echo off<br>
start/wait \域服务器IP地址\aaa 111.exe<br>
start/wait \域服务器IP地址\aaa 222.exe<br>
……</p>
<p>其中“域服务器IP地址”其实就是保存有所有待安装程序的计算机IP地址，“aaa”表示保存有所有待安装程序的共享文件夹，111.exe、222.exe……表示待安装的具体应用程序名，“/wait”参数表示逐一地安装每一个应用程序，倘若没有这个参数的话，那么多个应用程序可能会出现同时安装的现象，这样容易造成安装混乱的现象。完成上面的代码输入后，单击文本编辑界面中的“文件”/“另存为”命令，在其后打开的文件保存对话框中，输入文件名“install.bat”，最后单击“保存”按钮，将上面的命令代码保存成批处理文件“install.bat”。</p>
<p>接着在域服务器系统桌面中，依次单击“开始”/“运行”命令，在随后打开的系统运行对话框中，输入字符串命令“DSA.MSC”，单击“确定”按钮后，打开一个标题为“Active Directory用户和计算机”的界面；用鼠标右键单击该界面左侧列表区域处的“ad.ycsti.cn”域服务器名称，从随后出现的右键菜单中单击“属性”命令，再在打开的属性设置框中单击一下“组策略”标签，在对应的标签页面中你将看到一些默认的组策略；下面你可以单击“新建”按钮，来重新创建一个新的组策略，并将该组策略的名字取为“批量安装程序”；随后再选中“批量安装程序”这个选项，并单击一下“编辑”按钮，打开具体的组策略编辑界面，该界面与单台工作站中的组策略编辑界面完全一样。依次展开组策略编辑界面中的“用户设置”、“Windows设置”、“脚本-（登录/注销）”分支，在对应“脚本-（登录/注销）”分支的右侧子窗口中，双击一下“登录”选项，在接着出现的如图1所示的对话框中，将前面创建的“INSTALL.BAT”批处理文件选中并导入进来。如果“INSTALL.BAT”批处理文件不在本地计算机的话，那么你不可以直接进入其他计算机的共享文件夹来选择，而必须通过网上邻居窗口来选择“INSTALL.BAT”批处理文件，这主要是因为工作站是通过网络方式访问“INSTALL.BAT”批处理文件的，所以必须将该批处理文件具体路径调整为网络路径。例如，要是“INSTALL.BAT”批处理文件保存在IP地址为“10.168.160.16”、共享文件夹名为“install”的工作站时，你就可以按照下面的步骤来选择并导入该文件了：先在IE浏览器地址框中输入“\10.168.160.16”，单击回车键后就能见到对应工作站中的所有共享文件夹；接着双击“install”共享文件夹图标，再在其后的界面中选中“INSTALL.BAT”，这样一来你就能在IE地址框中看到完整的网络路径了，以后再将该路径直接复制到图1所示的对话框中，并单击“确定”按钮就可以完成组策略的编辑操作了。<br>
<a href="http://daledeng.blog.163.com/album/prevPhoto.do?photoId=_fks_HThGygRRz7G4rrMNqRuNeO3WnTd_Ra_j"><img src="http://img.blog.163.com/photo/B4stcnT584j3gikoSED6Dw==/4513451251555449605.jpg" alt=""></a> 图1</p>
<p>要想实现应用程序的批量安装目的，还需要事先将所有需要在工作站中安装的应用程序全部保存到域服务器中，以便任何拥有域帐号的工作站可以自动从服务器中复制安装源程序。首先需要在域服务器中创建一个共享名为“aaa”的文件夹，然后再把所有待安装的应用程序全部复制到该文件夹中，或者将保存有待安装的应用程序所在的文件夹设置为共享，并且将共享名称设置为“aaa”。</p>
<p>为了确保工作站可以顺利登录到域服务器，你还需要事先在域服务器中为每一台工作站创建登录帐号，并将这些帐号全部添加到“Account Operators”组中。如果你的工作站还没有成为域成员的话，还必须进行下面的步骤：用鼠标右键单击“我的电脑”图标，从弹出的右键菜单中执行“属性”命令，在其后出现的属性设置框中，单击“计算机名”标签，再单击对应标签页面中的“属性”按钮，接着选中“隶属于”设置项处的“域”选项，在随后被激活的文本框中输入具体的域名称，例如这里应该输入“ad.ycsti.cn”（如图2所示），再单击“确定”按钮并重新启动一下计算机系统，以后你只要输入域用户名以及密码，顺利登录进域服务器中，工作站就能自动、批量地安装应用程序了。当然在为工作站批量安装好应用程序后，必须及时在域服务器的组策略设置界面中，删除“登录脚本”策略，不然的话工作站下次登录服务器时又将会重新安装以前的应用程序了。另外还要注意的是，工作站登录进域服务器的那个用户帐户还必须具有超级管理员权限才行。<br>
<a href="http://daledeng.blog.163.com/album/prevPhoto.do?photoId=_fks_kHitcsrEvXr1HJafVZjiKO7-Q88UFxzW"><img src="http://img.blog.163.com/photo/KRaFqbUqnzL54ERfIRq3yQ==/3970204546503920688.jpg" alt=""></a> 图2</p>
<p>小提示：普通工作站在登录域服务器时，常常可能出现无法登录域的错误提示，这种情况多数是你没有正确设置DNS服务器IP地址造成的。由于在默认状态下，网络服务器被升级为域服务器时，已经自动把自身配置成了DNS服务器，所以其他工作站在登录该服务器时，也必须将工作站的DNS服务器设置成域服务器的IP地址。</p>
    </div>
    <a href="/posts/%E7%94%A8%E6%B4%BBwin2000%E5%9F%9F%E6%8E%A7%E5%88%B6%E5%99%A8/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
        <div class="w-100 mb4 relative bg-white">
          <div class="w-100 mb4 nested-copy-line-height relative bg-white">
  <div class="mb3 pa4 gray overflow-hidden bg-white">
    <span class="f6 db">Posts</span>
    <h1 class="f3 near-black">
      <a href="/posts/windows%E7%9A%84%E5%9F%9F%E5%92%8C%E6%B4%BB%E5%8A%A8%E7%9B%AE%E5%BD%95/" class="link black dim">
        WINDOWS的域和活动目录
      </a>
    </h1>
    <div class="nested-links f5 lh-copy nested-copy-line-height">
      <p>一、认识Windows 的域<br>
本小节重点从理论上阐述域的概念、作用和Windows 中域的产生。<br>
一台Windows 计算机，它要么隶属于工作组，要么隶属于域。所以说到域，我们就不得不提一下工作组，工作组是MS 的概念，一般的普遍称谓是对等网。工作组通常是一个由不多于10 台计算机组成的逻辑集合，如果要管理更多的计算机，MS 推荐你使用域的模式进行集中管理，这样的管理更有效。你可以使用域、活动目录、组策略等等各种功能，使你网络管理的工作量达到最小。当然这里的10 台只是一个参考值，11 台甚至20 台，如果你不想进行集中的管理，那么你仍然可以使用工作组模式。工作组的特点就是实现简单，不需要域控制器DC，每台计算机自己管理自己，适用于距离很近的有限数目的计算机。另外工作组名并没有太多的实际意义，只是在网上邻居的列表中实现一个分组而已；再就是对于“计算机浏览服务＂，每一个工作组中，会自动推选出一个主浏览器，负责维护本工作组所有计算机的NetBIOS 名称列表。用户可以使用默认的workgroup，也可以任意起个名字，同一工作组或不同工作组在访问时也没有什么分别。域（Domain）是一个共用“目录服务数据库＂的计算机和用户的集合，实现起来要复杂一些，至少需要一台计算机安装NT/2000/03 Server 版本使其充当DC，来实现集中式的管理。若考虑到容错的话，至少需要两台。对于NT4 域就是一台PDC（具有唯一性），一至多台BDC，对于2000/03 域，已经没有PDC 和BDC 的概念，要容错就需要两至多台DC。域是逻辑分组，与网络的物理拓扑无关，可以很小，比如只有一台DC；也可以很大，包括遍布世界各地的计算机，比如大型跨国公司网络上的域（当然实际中他们多采用多域结构，还可以利用AD 站点来优化AD 复制）。这个“目录服务数据库＂，在NT4 时，保存用户帐号名称和密码等安全安全信息，以及安全规则设置，又被称作安全帐号管理（SAM）数据库，简称SAM 库。在非DC 上的本地的SAM库与DC 上域所用的SAM 库类似，只不过对于NT4 域的SAM 库文件，保存有整个域的用户和计算机，用“域用户管理器＂和“服务器管理器＂来管理，本地的SAM 库文件，保存有本地机的用户，由“用户管理器＂来管理。<br>
从2000 开始，MS 引入了活动目录AD，DC 通过AD 来提供目录的服务，例如它负责维护AD 数据库、审核用户的账户和密码是否正确、将AD 数据库复制到其它的DC 等。AD 库的核心文件就是winnt ntds ntds.dit 文件。注意组策略的具体设置值，并不存在这个文件中，而是保存在winnt sysvol sysvol 这个共享夹下，用于向其它DC 复制，传播给域成员，来生效。但需要说明的是：2000/XP/03 的非DC 域成员计算机上仍使用和NT4 一样的SAM 库文件来保存本地帐号。正是由于所有域成员计算机和域用户都共用这个域的“目录服务数据库＂，域管理员就可以基于域的“目录服务数据库＂来进行集中管理、共享资源，如用户、组、计算机帐号、权限设置、组策略设置等等。目录服务为管理员提供从网络上任何一个计算机上查看和管理用户和网络资源的能力。目录服务也为用户提供唯一的用户名和密码，用户只需一次登录，即可访问本域或有信任关系的其它域上的所有资源（当然用户得有权限才行），而不需要多次提供用户<br>
名和密码登录。<br>
二、构建Windows 2000 的域<br>
这个过程简单说就是：选一台2000S/AS 计算机，运行AD 安装向导，在其上安装活动目录，使其成为DC。然后将其它的计算机加入到这个域。<br>
说明：至于是用2000S，还是用2000AS，对于一般的用户差别不大。2000S 支持最多4 个<br>
CPU，最大4G 内存；2000AS 支持最多8 个CPU，最大内存8G，还支持群集功能。但这些我们一般用户都用不到，所以对于普通用户来说，选择S 或AS 都是一样的。<br>
1、系统要求<br>
*一台2000S 或2000AS 独立或成员服务器，2000DS 只有OEM 版，随厂商硬件发售，平常我们是见不到的。</p>
    </div>
    <a href="/posts/windows%E7%9A%84%E5%9F%9F%E5%92%8C%E6%B4%BB%E5%8A%A8%E7%9B%AE%E5%BD%95/" class="ba b--moon-gray bg-light-gray br2 color-inherit dib f7 hover-bg-moon-gray link mt2 ph2 pv1">read more</a>
  </div>
</div>

        </div>
      
    </section>
  </div>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="/" >
    &copy;  Seth Dang博客 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
