<!doctype html><html lang=zh-cn dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>cisco路由器的基本配置 | Seth Dang'S</title><meta name=keywords content><meta name=description content="1 ． 配 置 以 太 網（Ethernet） 端 口：
conf t
從終端配置路由器。
int e0
指定E0口。
ip addr ABCD XXXX
ABCD為以太網地址,XXXX為子網掩碼。
ip addr ABCD XXXX secondary
E0口同時支持兩個地址類型。如果第一個
為A類地址，則第二個為B或C類地址。"><meta name=author content="Seth"><link rel=canonical href=https://seth.dpdns.org/posts/cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/><link crossorigin=anonymous href=/assets/css/stylesheet.a090830a421002426baafbd314e38f149d77b4c48a12ee9312700d770b27fb26.css integrity="sha256-oJCDCkIQAkJrqvvTFOOPFJ13tMSKEu6TEnANdwsn+yY=" rel="preload stylesheet" as=style><link rel=icon href=https://seth.dpdns.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://seth.dpdns.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://seth.dpdns.org/favicon-32x32.png><link rel=apple-touch-icon href=https://seth.dpdns.org/apple-touch-icon.png><link rel=mask-icon href=https://seth.dpdns.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh-cn href=https://seth.dpdns.org/posts/cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://seth.dpdns.org/posts/cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"><meta property="og:site_name" content="Seth Dang'S"><meta property="og:title" content="cisco路由器的基本配置 "><meta property="og:description" content="1 ． 配 置 以 太 網（Ethernet） 端 口：
conf t 從終端配置路由器。
int e0 指定E0口。
ip addr ABCD XXXX ABCD為以太網地址,XXXX為子網掩碼。
ip addr ABCD XXXX secondary E0口同時支持兩個地址類型。如果第一個
為A類地址，則第二個為B或C類地址。"><meta property="og:locale" content="zh-cn"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2007-03-28T14:30:16+08:00"><meta property="article:modified_time" content="2007-03-28T14:30:16+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="cisco路由器的基本配置 "><meta name=twitter:description content="1 ． 配 置 以 太 網（Ethernet） 端 口：
conf t
從終端配置路由器。
int e0
指定E0口。
ip addr ABCD XXXX
ABCD為以太網地址,XXXX為子網掩碼。
ip addr ABCD XXXX secondary
E0口同時支持兩個地址類型。如果第一個
為A類地址，則第二個為B或C類地址。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://seth.dpdns.org/posts/"},{"@type":"ListItem","position":2,"name":"cisco路由器的基本配置 ","item":"https://seth.dpdns.org/posts/cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"cisco路由器的基本配置 ","name":"cisco路由器的基本配置 ","description":"1 ． 配 置 以 太 網（Ethernet） 端 口：\nconf t 從終端配置路由器。\nint e0 指定E0口。\nip addr ABCD XXXX ABCD為以太網地址,XXXX為子網掩碼。\nip addr ABCD XXXX secondary E0口同時支持兩個地址類型。如果第一個\n為A類地址，則第二個為B或C類地址。\n","keywords":[],"articleBody":"1 ． 配 置 以 太 網（Ethernet） 端 口：\nconf t 從終端配置路由器。\nint e0 指定E0口。\nip addr ABCD XXXX ABCD為以太網地址,XXXX為子網掩碼。\nip addr ABCD XXXX secondary E0口同時支持兩個地址類型。如果第一個\n為A類地址，則第二個為B或C類地址。\nno shutdown 激活E0口。\nexit 2．X.25的配置\nconf t int S0 指定S0口.\nip addr ABCD XXXX ABCD為以太網S0的IP地址,XXXX為子網掩碼.。\nencap X25-ABC 封裝X.25協議。ABC指定X.25為DTC或DCE操作，缺省為DTE。\nx25 addr ABCD ABCD為S0的X.25端口地址,由郵電局提供。\nx25 map ip ABCD XXXX br 映射的X.25地址.ABCD為對方路由器(如:S0)的\nIP地址,XXXX為對方路由器(如:S0)的X.25端口地址。\nx25 htc X 配置最高雙向通道數.X的取值範圍1-4095,\n要根據郵電局實際提供的數字配置。\nx25 nvc X 配置虛電路數。X不可超過據郵電局實際\n提供的數,否則,將影響數據的正常傳輸。\nexit -— 3 ． 專 線 的 配 置：\nconf t int S2 指定S2口。\nip addr ABCD XXXX ABCD為S2的IP地址,XXXX為子網掩碼。\nexit 4．幀中繼的配置\nconf t int s0 ip addr ABCD XXXX ABCD為S0的IP地址,XXXX為子網掩碼。\nencap frante_relay 封裝frante_relay協議。\nno nrzi_encoding NRZI=NO\nframe_relay lmi_type q933a LMI使用Q933A標準．LMI（Local management Interface）有3種：ANSI：T1.617；CCITTY：Q933A和CISCO特有的標準。\nfram-relay intf-typ ABC ABC為幀中繼設備類型，它們分別是DTE設備，DCE交換機或NNI（網絡接點接口）支持。\nframe_relay interface_dlci 110 br 配置DLCI(數據鏈路連接標識符)。\nframe-relay map ip ABCD XXXX broadcast 建立幀中繼映射。ABCD為對方ip地址，XXXX為本地DLCI號，broadcast允許廣播向前轉發或更新路由。\nno shutdown 激活本端口．\nexit -— 5 ． 幀 中 繼 子 接 口 的 配 置：\nconf ｔ int s0.1 point-to-point 對應S0的子接口1，點對點方式。\nip addr ABCD XXXX ABCD為子口1的IP地址,XXXX為子網掩碼。\nframe-relay intreface-dlci 100 br 6．配置撥號備份\n(1)．配置備份主口\nconf t int s0 S0為主口．\nbackup int asy 1 A1口為備份口．\nbackup delay 0 1 延時1秒．\n(2)．配置虛擬接口\nconf t ip addr ABCD XXXX ABCD為虛擬接口IP地址,XXXX為子網掩碼。\nencap ppp 封裝ppp協議．\ndialer in-band 激活隨叫隨撥功能．\ndialer idle-timeout 7200 dialer map ip ABCD modem-script call broadcast 6225481 br 映射對應的撥號口． ABCD為對方撥號口的ip地址，6225481為對應的電話號碼。\ndialer_group 1 定義撥號組成員． (3)．配置防火牆\ndialer_list 1 pro ip permit 允許ip協議通過。\n(4)．配置連接口令\nuser name ABCD pass XXXX ABCD為對方主機名,XXXX為連接口令．\n(5)．配置撥號字符串\nconf t chat-script call ABORT BUSY ABORT ERROR\"\" atdt 6335481 TIMEOUT 45 “CONNECT” 6335481為對方電話號碼。\n（6）．配置撥號連接密碼\nconf t username ROU1 pass XXXX ROU1為對方路由器名，XXXX為連接密碼。\n(7)．配置線路\nconf ｔ line aux 0 modem inout MODEM雙向傳輸。\nmodem autoconfigure discovery transport input all rxspeed 51200 MODEM的收發速率為51200 。\nexit 7．配置同步/異步口 （適用於2522）\nconf t int s2 ph asyn 配置S2為異步口．\nph sync、 配置S2為同步口．\n8．動態路由的配置\nconf t router eigrp 20 使用EIGRP路由協議。常用的路由協議有RIP，IGRP，IS-IS等。\npassive-interface serial0 若S0與X.25相連，則輸入本條指令。\npassive-interface serial1 若S1與X.25相連，則輸入本條指令。\nnetwork ABCD ABCD為本機的以太網地址。\nnetwork XXXX XXXX為S0的ip地址。\nno auto-summary exit 9．靜態路由的配置\nip router ABCD XXXX YYYY 90 ABCD為對方路由器的以太網地址；XXXX為子網掩碼.；YYYY為對方對應的廣域網端口地址。\ndialer-list 1 protocol ip permail 10．備份配置文件到硬盤\ncopy run tftp 在硬盤上建立一個空文件且有讀寫權限,才能備份成功．\n11．恢復備份配置文件到路由器\ncopy tftp run 12．在路由器上建一個備份\ncopy run start 路由器的配置參數較多，可根據實際需要增減，\n限於篇幅，本文僅給出了一般的常用配置。\n-— ． 調 試\n-— 1. 首 先 將 路 由 器 的Ethernet 口 和 所 有 要 使 用 的 串 口 都 激 活， 方 法 是 進 入 該 口， 執 行No Shutdown。\n-— 2. 將 和 路 由 器 相 連 的 主 機 加 上 缺 省 路 由（ 中 心 路 由 器 的Ethernet 地 址）， 方 法 是 在UNIX 系 統 的 超 級 用 戶 下 執 行：router add defaule XXXX 1（XXXX 為 路 由 器 的E0 口 地 址）。 每 台 主 機 都 要 加 缺 省 路 由， 否 則， 將 不 能 正 常 通 訊。\n-— 3. Ping 本 機 的 路 由 器Ethernet 網 口（ 若 不 通：（1）Ethetnet 網 口 沒 有 激 活（2） 不 在 一 個 網 上）、 廣 域 網 口（ 若 不 通： 沒 有 加 缺 省 路 由）， 對 方 廣 域 網 口（ 若 不 通： 路 由 器 配 置 錯 誤）、 路 由 器Ethernet 網 口（ 若 不 通： 路 由 器 配 置 錯 誤）、 主 機Ethernet 網 口（ 若 不 通： 對 方 主 機 沒 有 加 缺 省 路 由）。\n-— 4. 在 專 線 卡(X.25) 主 機 上 加 網 關（ 靜 態 路 由）， 方 法 是 在UNIX 系 統 的 超 級 用 戶 下 執 行：router add X.X.X.X Y.Y.Y.Y 1。 X.X.X.X 為 對 方Ethernet 網 地 址；Y.Y.Y.Y 為 對 方 廣 域 網 地 址。\n-— 5. 使 用Tracert 對 路 由 進 行 跟 蹤， 以 確 定 不 通 網 段。\nWAN的配置\n1、 配置DDR\nDial-on-demand routing(DDR)是用公共電話網提供了網絡連接.通常的,廣域網大多數用專線連接的,路由器連接到類似modem或ISDN TAs的數據終端DCE設備上,它們支持同步V.25bis協議,你可以用scripts和dialer命令設定撥號串.DDR比較適用於用戶對數率要求不高,偶爾有數據傳輸或只是在特定時候傳輸數據,比如銀行每晚傳送報表等等情況下.當一個感興趣的包到達路由器時,產生一個DDR請求.路由器發送呼叫建立信息給指定的串口的DCE設備.這個呼叫就把本地和遠程的設備連接起來.一旦沒有數據傳輸,空閒時間開始計時,超過設置的空閒時間,這一次連接終止.DDR現在都用靜態路由來傳輸數據包,避免路由交換引起的DDR撥號.AppleTalk,Banyan VINES, CLNS, DECnet, IP, IPX, 和XNS可以通過DDR路由尋址.同步串口,異步串口和ISDN端口可以配置成到一個或多個目的地DDR連接.在配置DDR過程中,我們可以把一個或幾個物理接口配置成一個邏輯撥號接口,它可以是同步V.25方式,同步DTR啟動撥號或異步chat script方式.在端口配置模式下:\n功能命令\n在一個端口上激活 Dial-on-demand routing dialer in-band\n指定一個端口為撥號訪問組 dialer-group group-number\n指定一個單一電話號碼 dialer string dial-string\n斷線前空閒等待時間 dialer idle-time seconds\n定義一個或多個目的電話號碼表 dialer map protocol net-hop-address dialer-string\n限定傳輸的access-list表或特定協議 dialer-list dialer-group list access-list-number\n或 dialer-list dialer-group protocol protocol-name {permit|deny|list acce ss-list-number}\n其中dialer string和dialer map兩條命令任選一,dialer string是在只有一個電話號碼時用,而dialer map是一個電話號碼表.\n詳細配置說明請參閱下面\"DDR Example\"的實例.\n配置撥號備份\n撥號備份提供了一種保護,使得當廣域網上主幹線出現故障時,啟動一條備份線路,使通信正常運轉.\n啟動備份有兩種情況:\n主幹線斷掉\n傳輸流量超過了定義的最大值\n需作的定義如下:\n在主幹線路端口上設置它的備份端口 backup interface interface-name\n定義備份負載 backup load {enable-threshold | never} {disable-load |never}\n定義主幹線up或down的響應時間 backup delay {enable-delay | never) {disable-delay | never}\n其中: enable-threshold — 表示主幹線超過總傳輸量的百分比,啟動備份線路\ndisable-load — 表示傳輸量減少百分之多少就斷開備份線路.\nenable-delay — 表示主幹線斷開多長時間後,啟動備份線路.\ndisable-delay — 表示主幹線又重新恢復多長時間後,斷開備份線路.\n2、 配置幀中繼\n幀中繼是一種由ANSI和CCITT標準化的協議,它能為現今突發性業務流量(如LAN互連及SNA業務)提供顯著的性能價格優勢.幀中繼是客戶端設備(CPE),諸如路由器或前端處理器,和一個向遠程CPE發送數據的廣域網之間的一種接口協議.它有以下幾個特點:低時延，時延是指一個給定待發送幀穿過網絡到達遠程用戶設備所用的時間.當網絡時延增大時,性能會下降;尤其對於敏感協議(如SNA和DECnet),所有幀被發送後必須等待應答的協議(即Novell IPX),以及利用短交易式的應用.可靠性，在給定時延條件下,吞吐量隨著網絡的可靠性變化而變化,可靠性好,超時等待重發幀越少,吞吐量就會大大增加.更低的聯網開銷可預測性在許多網絡環境中,如SNA CICS,不僅要求時延低,而且需要可預測性.公平性。Ciscos Frame Relay目前支持IP,DECnet,AppleTalk, Xerox Network Service(XNS), Novell IPX, International Organization for Standards (ISO) Connectionless Network Service (CLNS), Banyan VINES, 和 transparent bridging在幀中繼中傳輸.\n配置幀中繼的工作表:\n在一個端口上作幀中繼打包\n定義動態或靜態的地址映射\n定義LMI\n配置幀中繼交換虛電路\n幀中繼交換\n監控幀中繼連接\n在一個端口上作幀中繼打包\n某一端口上配置幀中繼打包走幀中繼協議,在global配置模式下:\n功 能 命 令\n指定走幀中繼的端口並進入端口配置模式 interface serial number\n指定幀中繼打包方式 encapsulation frame-relay [ietf]\nCisco的幀中繼與RFC 1490的打包方式一致,允許不同廠家的產品互相通信.當與其它廠家路由器連接時,請用IETF打包.\n定義動態或靜態的地址映射\n動態地址映射\n動態地址映射用幀中繼的翻轉ARP協議發送請求下一個希望到達的地址(next hopprotocol address)(假設知道DLCI),當有應答翻轉ARP協議請求時,保存在address-to-DLCI映射表中,這張表就用來提供下一個希望到達的地址或出去的DLCI地址翻轉ARP協議默認是打開的,故動態地址映射不需要做任何配置.\n靜態地址映射\n一個靜態地址映射是人為的指定下一個希望到達的地址(next hop protocol address)與DLCI的對應關係.當指定了靜態地址映射時,翻轉ARP協議自動關閉.\n建立靜態地址映射表需完成:\n功 能 命 令\n定義一個端口或子端口的DLCI地址 frame-relay interface-dlci dlci\n指定一個next hop protocol address與DLCI之間對應 frame-relay map protocol protocol-address dlci [broadcast] [ietf] [cisco]相應地,關鍵字protocol支持的協議:\nIP—ip\nDECnet—decnet\nAppleTalk—appletalk\nXNS—xns\nNovell IPX—ipx\nVINES—vines\nISO CLNS—clns\n如果是一點對一點,可用interface-dlci命令,若是一點對多點則設定 frame-relay map 一系列的dlci與ip address 對應表.\n定義LMII\n在Cisco IOS Release 11.2版本以上,支持本地管理接口LMI(Local managementInterface)自動識別,即由交換機端口決定LMI的類型.當然,我們也可以明確配置\nLMI類型.\n功 能 命 令\n建立路由器間keepalive時間 frame-relay keepalive number\n定義N391的間隔時間 frame-relay lmi-n391-dte keep-exchanges\n配置幀中繼交換虛電路\n目前,訪問幀中繼網是56K到45M數率,幀中繼是在兩個節點間建立面向連接的,包交換的虛電路.\n在一個物理端口上配置SVCs\n在子端口上配置SVCs\n在一個幀中繼端口上配置SVC操作\n功 能 命 令\n指定物理端口 interface serial number\n如果需要,配置IP地址 ip address ip-address mask\n在這個端口上配置幀中繼打包 encapsulation frame-relay\n在這個端口上激活幀中繼SVC frame-relay svc\n在子端口上配置SVCs\n功 能 命 令\n在主端口上指定一個子端口 interface serial number.subinterface-number {multipoint | point-to-point}\n如果需要,配置IP地址 ip address ip-address mask\n參閱下面\"Configure subinterface Example\"的例子.\n幀中繼交換\n當一個幀中繼網要通過IP網與另一個幀中繼網互連,就要用到幀中繼交換.把IP網\n看作幀中繼包的隧道通過去.\n實現幀中繼交換,配置如下:\n功 能 命 令\n把路由器作為幀中繼交換機 frame-relay switching\n在路由器上設置靜態路由 frame-relay route in-dlci out-interface out-dlci\n定義網絡功能 frame-relay intf-type {dte| dce| nni}\n請參閱\"Frame Relay Switching Example\"配置實例.\n監控幀中繼連接\n在EXEC模式下:\n功 能 命 令\n顯示幀中繼DLCI和LMI信息 show interface serial number\n顯示LMI狀態 show frame-relay lmi [type number]\n顯示PVC狀態 show frame-relay pvc [type number [dlci]]\n顯示配置靜態路由 show frame-relay route\n顯示幀中繼傳輸狀態 show frame-relay traffic\n3、配置DDN\nDDN(Digital Data Network)是一種點對點的同步數據通信鏈路.它支持PPP,SLIP,HDLC和SDLC等鏈路層通信協議.允許IP, Novell IPX, Bridging,CLNS,AppleTalk,DECnet等多種上層協議在上面運行.\n基本配置\n壓縮技術\nE1端口配置\n基本配置\n功 能 命 令\n進入指定端口 interface serial number\n定義該端口IP地址 ip address ip-address mask\n指定該端口打包方式 encapsulation {PPP| HDLC }\n壓縮技術\n通常在串口中傳輸的數據是不壓縮的,它允許數據包頭在每次傳輸時正常交換,但每次將浪費帶寬.目前支持的壓縮有PPP,Frame Relay, X.25, TCP等等.\nCisco的壓縮是通過軟件完成的,將影響系統性能.故建議路由器CPU佔用超過65%,就不要使用壓縮.(show process cpu EXEC命令查看當前CPU使用情況)\n功 能 命 令\nTCP傳輸頭壓縮 ip tcp head-compression [passive]\nX.25壓縮 X25 compress\nPPP壓縮 ppp compress [predictir|stac]\n注: “passive\"表示只有輸入包是壓縮時,輸出包才壓縮.\nE1端口配置\n在Cisco 4500,4700,7000和7500系列裏面均支持E1(2.048Mbps)數率的接口.每一個E1端口可以按時隙分成30路64K數據線路和2路信號線路.這30個64K數據線路每一路均可以當作一條64K的專線.\n功 能 命 令\n在配置模式下,定義Controller E1 controller e1 slot/port\n定義line code linecode {ami |hdb3}\n定義字符幀 framing {crc4 |no-crc4}\n定義E1組 channel-group number timeslots range [speed {48| 56| 64}]\n指定串口屬於那一個channel-group組 interface serial slot/port:channel-group\n注:slot/port—-是針對7000或7500系列的,故區分槽口號和端口號.\nlinecode—-默認是HDB3.\nframing—-默認是crc4,要與電信局參數匹配.\nchannel-group—-每個E1可以分成30個channel-group,把channel-group和時間槽對應起來.channel-group是0-30,timeslots是1-31.\ninterface serial—-在定義完E1 channel-group後,我們把group賦予成一個虛擬串口.\n具體的請參閱\"Channelized E1 Interface Example\"實例.\n4、配置X.25\nX.25配置完成如下工作:\n功 能 命 令\n設置X.25模式 encapsulation x25 [dte|dce]\n設置最大虛電路數 x25 htc max-vc-number\n設置X.121地址 x25 address x121-address\n建立IP地址與X.121地址對應 x25 map ip ip-address x121-addres [broadcast]\nhtc—-htc是最大的虛電路數,因為許多X.25交換機是從高到低建立虛電路的,max-vc-number不能超過申請的最大值.\n請參閱\"X.25 Example\"的配置實例.\n5、配置HDLC:\nHDLC是CISCO路由器使用的缺省協議，一台新路由器在未指定封裝協議時默認使用HDLC封裝。\nA.有關命令\n端口設置:\n任務 命令\n設置HDLC封裝 encapsulation hdlc\n設置DCE端線路速度 clockrate speed\n復位一個硬件接口 clear interface serial unit\n顯示接口狀態 show interfaces serial [unit] 1\n注:1.以下給出一個顯示Cisco同步串口狀態的例子.\nRouter#show interface serial 0\nSerial 0 is up, line protocol is up\nHardware is MCI Serial\nInternet address is 150.136.190.203, subnet mask is 255.255.255.0\nMTU 1500 bytes, BW 1544 Kbit, DLY 20000 usec, rely 255/255, load 1/255\nEncapsulation HDLC, loopback not set, keepalive set (10 sec)\nLast input 0:00:07, output 0:00:00, output hang never\nOutput queue 0/40, 0 drops; input queue 0/75, 0 drops\nFive minute input rate 0 bits/sec, 0 packets/sec\nFive minute output rate 0 bits/sec, 0 packets/sec\n16263 packets input, 1347238 bytes, 0 no buffer\nReceived 13983 broadcasts, 0 runts, 0 giants\n2 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 2 abort\n22146 packets output, 2383680 bytes, 0 underruns\n0 output errors, 0 collisions, 2 interface resets, 0 restarts\n1 carrier transitions\nB. 舉例:\n設置如下：\nRouter1:\ninterface Serial0\nip address 192.200.10.1 255.255.255.0\nclockrate 1000000\nRouter2:\ninterface Serial0\nip address 192.200.10.2 255.255.255.0\n!\nC. 舉例使用E1線路實現多個64K專線連接.\n相關命令:\n任務 命令\n進入controller配置模式 controller {t1 | e1} number\n選擇幀類型 framing {crc4 | no-crc4}\n選擇line-code類型 linecode {ami | b8zs | hdb3}\n建立邏輯通道組與時隙的映射 channel-group number timeslots range1\n顯示controllers接口狀態 show controllers e1 [slot/port]2\n注: 1. 當鏈路為T1時,channel-group編號為0-23, Timeslot範圍1-24; 當鏈路為E1時, channel-group編號為0-30, Timeslot範圍1-31.\n2.使用show controllers e1觀察controller狀態,以下為幀類型為crc4時controllers正常的狀態.\nRouter# show controllers e1\ne1 0/0 is up.\nApplique type is Channelized E1 - unbalanced\nFraming is CRC4, Line Code is HDB3 No alarms detected.\nData in current interval (725 seconds elapsed):\n0 Line Code Violations, 0 Path Code Violations\n0 Slip Secs, 0 Fr Loss Secs, 0 Line Err Secs, 0 Degraded Mins\n0 Errored Secs, 0 Bursty Err Secs, 0 Severely Err Secs, 0 Unavail Secs\nTotal Data (last 24 hours) 0 Line Code Violations, 0 Path Code Violations,\n0 Slip Secs, 0 Fr Loss Secs, 0 Line Err Secs, 0 Degraded Mins,\n0 Errored Secs, 0 Bursty Err Secs, 0 Severely Err Secs, 0 Unavail Secs\n以下例子為E1連接3條64K專線, 幀類型為NO-CRC4,非平衡鏈路,路由器具體設置如下:\nshanxi#wri t\nBuilding configuration…\nCurrent configuration:\n!\nversion 11.2\nno service udp-small-servers\nno service tcp-small-servers\n!\nhostname shanxi\n!\nenable secret 5 $1$XN08$Ttr8nfLoP9.2RgZhcBzkk/\nenable password shanxi\n!\n!\nip subnet-zero\n!\ncontroller E1 0\nframing NO-CRC4\nchannel-group 0 timeslots 1\nchannel-group 1 timeslots 2\nchannel-group 2 timeslots 3\n!\ninterface Ethernet0\nip address 133.118.40.1 255.255.0.0\nmedia-type 10BaseT\n!\ninterface Ethernet1\nno ip address\nshutdown\n!\ninterface Serial0:0\nip address 202.119.96.1 255.255.255.252\nno ip mroute-cache\n!\ninterface Serial0:1\nip address 202.119.96.5 255.255.255.252\nno ip mroute-cache\n!\ninterface Serial0:2\nip address 202.119.96.9 255.255.255.252\nno ip mroute-cache\n!\nno ip classless\nip route 133.210.40.0 255.255.255.0 Serial0:0\nip route 133.210.41.0 255.255.255.0 Serial0:1\nip route 133.210.42.0 255.255.255.0 Serial0:2\n!\nline con 0\nline aux 0\nline vty 0 4\npassword shanxi\nlogin\n!\nend\n6、配置PPP:\nPPP(Point-to-Point Protocol)是SLIP(Serial Line IP protocol)的繼承者，它提供了跨過同步和異步電路實現路由器到路由器(router-to-router)和主機到網絡(host-to-network)的連接。\nCHAP(Challenge Handshake Authentication Protocol)和PAP(Password Authentication Protocol) (PAP)通常被用於在PPP封裝的串行線路上提供安全性認證。使用CHAP和PAP認證,每個路由器通過名字來識別，可以防止未經授權的訪問。\nCHAP和PAP在RFC 1334上有詳細的說明。\nA. 有關命令\n端口設置\n任務 命令\n設置PPP封裝 encapsulation ppp1\n設置認證方法 ppp authentication {chap | chap pap | pap chap | pap} [if-needed] [list-name | default] [callin]\n指定口令 username name password secret\n設置DCE端線路速度 clockrate speed\n注：1、要使用CHAP/PAP必須使用PPP封裝。在與非Cisco路由器連接時，一般採用PPP封裝，其它廠家路由器一般不支持Cisco的HDLC封裝協議。\n2. 舉例\n路由器Router1和Router2的S0口均封裝PPP協議，採用CHAP做認證，在Router1中應建立一個用戶，以對端路由器主機名作為用戶名，即用戶名應為router2。同時在Router2中應建立一個用戶，以對端路由器主機名作為用戶名，即用戶名應為router1。所建的這兩用戶的password必須相同。\n設置如下：\nRouter1:\nhostname router1\nusername router2 password xxx\ninterface Serial0\nip address 192.200.10.1 255.255.255.0\nclockrate 1000000\nppp authentication chap\n!\nRouter2:\nhostname router2\nusername router1 password xxx\ninterface Serial0\nip address 192.200.10.2 255.255.255.0\nppp authentication chap\n7、廣域網配置實例\nDDR Example\nDial Backup Example\nConfigure subinterface Example\nFrame Relay Switching Example\nChannelized E1 Interface Example\nX.25 Example\nDDR Example\n例：\nConfiguration for RouterA:\nip route 131.108.29.0 131.108.126.2\nip route 131.108.1.0 131.108.126.2\ndialer-list 1 protocol ip permit\ndialer-list 1 protocol ipx deny\n!\ninterface serial 0\nip address 131.108.126.1 255.255.255.0\ndialer in-band\ndialer-group 1\n!\ndialer map ip 131.108.126.2 5551234\n!\ndialer idle-timeout 300\nDial Backup Example\nA)同步V.25 bits方式\nConfiguration for RouterA:\ninterface Serial0:0\nbackup delay 0 10\nbackup interface Serial10\nip address 16.217.30.2 255.255.255.252\n!\ninterface Serial10\nip address 16.30.16.81 255.255.255.0\nencapsulation ppp\ndialer in-band\ndialer string 8292\ndialer-group 1\npulse-time 1\n!\ndialer-list 1 protocol ip permit\nB)輔助口作撥號備份\nConfiguration for RouterA:\nchat-script MYDIAL \"” “atdt 8292” TIMEOUT 60 “CONNECT”\n!\ninterface Serial0\nbackup delay 0 0\nbackup interface Async1\nip address 16.3.1.1 255.255.255.0\nencapsulation ppp\n!\ninterface Async1\nip address 16.3.2.1 255.255.255.0\nencapsulation ppp\nkeepalive 9\nasync default routing\nasync dynamic address\nasync dynamic routing\nasync mode dedicated\ndialer in-band\ndialer string 8292\ndialer-group 1\n!\ndialer-list 1 protocol ip permit\n!\nline aux 0\nscript dialer MYDIAL\nmodem InOut\ntransport output none\nstopbits 1\nflowcontrol hardware\nspeed 9600\nSubinterface Example(Frame Relay)\nConfiguration for RouterA:\ninterface serial 0\nencapsulation frame-relay\ninterface s 0.1 multipoint\nip address 11.10.11.1 255.255.255.0\nframe-relay interface-dlci 41\nframe-relay interface-dlci 42\nConfiguration for RouterC:\ninterface serial 0\nencapsulation frame-relay\ninterface s 0.1 point-to-point\nip address 11.10.16.2 255.255.255.0\nframe-relay interface-dlci 46\nConfiguration for RouterB:\ninterface serial 0\nencapsulation frame-relay\ninterface s 0.1 multipoint\nip address 11.10.11.3 255.255.255.0\nframe-relay interface-dlci 43\nframe-relay interface-dlci 44\n!\ninterface s 0.2 point-to-point\nip address 11.10.13.1 255.255.255.0\nframe-relay interface-dlci 48\nFrame Relay Switching Example\nConfiguration for RouterA:\nframe-relay switching\n!\nint s 0\nno ip address\nframe-relay encapsulation\nframe-relay route 167 tun0 43\nframe-relay intf-type dce\n!\nint s 1\nip address 131.108.100.1 255.255.255.0\n!\nint tu 0\ntunnel source serial 1\ntunnel destination 131.108.13.2\nConfiguration for RouterB:\nframe-relay switching\n!\nint s 0\nno ip address\nframe-relay encapsulation\nframe-relay route 9 tun0 43\nframe-relay intf-type dce\n!\nint s 1\nip address 131.108.13.2 255.255.255.0\n!\nint tu 0\ntunnel source serial 1\ntunnel destination 131.108.100.1\nChannelized E1 Interface Example\n假設是7500系列路由器,E1接口(MIP板)在插槽4上面.一個channel-group可對應多個時間槽,本例中serial4/0:1有5*64Kbps的數率.\nConfiguration for Router:\ncontroller E1 0\nframing NO-CRC4\nchannel-group 0 timeslots 1\nchannel-group 1 timeslots 2,7-9,20 speed 64\n!\ninterface Serial4/0:0\nip address 16.217.30.2 255.255.255.252\nencapsulation ppp\n!\ninterface Serial4/0:1\nip address 16.205.30.5 255.255.255.252\nX.25 Example\n在配置X.25時,為減少路由交換引起的呼叫,通常用靜態路由.而當一對多情況下,\n不在一個子網中用subinterface配置.\nConfiguration for Router:\ninterface serial 0\nip address 131.108.100.1 255.255.255.0\nencapsulation x25\nx25 address 041673226839\nx25 htc 16\nx25 map ip 131.108.100.2 041675222222\nint s 0.1\nip address 131.108.101.1 255.255.255.0\nx25 map ip 131.108.101.2 041674222222\n!\nip route 131.108.100.0 255.255.255.0 131.108.100.2\nip route 131.108.101.0 255.255.255.0 131.108.101.2\n路由協議設置\n一、RIP協議\nRIP(Routing information Protocol)是應用較早、使用較普遍的內部網關協議(Interior Gateway Protocol,簡稱IGP)，適用於小型同類網絡，是典型的距離向量(distance-vector)協議。文檔見RFC1058、RFC1723。\nRIP通過廣播UDP報文來交換路由信息，每30秒發送一次路由信息更新。RIP提供跳躍計數(hop count)作為尺度來衡量路由距離，跳躍計數是一個包到達目標所必須經過的路由器的數目。如果到相同目標有二個不等速或不同帶寬的路由器，但跳躍計數相同，則RIP認為兩個路由是等距離的。RIP最多支持的跳數為15，即在源和目的網間所要經過的最多路由器的數目為15，跳數16表示不可達。\n1. 有關命令\n任務 命令\n指定使用RIP協議 router rip\n指定RIP版本 version {1|2}1\n指定與該路由器相連的網絡 network network\n注：1.Cisco的RIP版本2支持驗證、密鑰管理、路由匯總、無類域間路由(CIDR)和變長子網掩碼(VLSMs)\n2. 舉例\nRouter1:\nrouter rip\nversion 2\nnetwork 192.200.10.0\nnetwork 192.20.10.0\n！\n相關調試命令：\nshow ip protocol\nshow ip route\n二、IGRP協議\nIGRP (Interior Gateway Routing Protocol)是一種動態距離向量路由協議，它由Cisco公司八十年代中期設計。使用組合用戶配置尺度，包括延遲、帶寬、可靠性和負載。\n缺省情況下，IGRP每90秒發送一次路由更新廣播，在3個更新週期內(即270秒)，沒有從路由中的第一個路由器接收到更新，則宣佈路由不可訪問。在7個更新週期即630秒後，Cisco IOS 軟件從路由表中清除路由。\n1. 有關命令\n任務 命令\n指定使用RIP協議 router igrp autonomous-system1\n指定與該路由器相連的網絡 network network\n指定與該路由器相鄰的節點地址 neighbor ip-address\n注：1、autonomous-system可以隨意建立，並非實際意義上的autonomous-system,但運行IGRP的路由器要想交換路由更新信息其autonomous-system需相同。\n2．舉例\nRouter1:\nrouter igrp 200\nnetwork 192.200.10.0\nnetwork 192.20.10.0\n!\n三、OSPF協議\nOSPF(Open Shortest Path First)是一個內部網關協議(Interior Gateway Protocol,簡稱IGP)，用於在單一自治系統(autonomous system,AS)內決策路由。與RIP相對，OSPF是鏈路狀態路由協議，而RIP是距離向量路由協議。\n鏈路是路由器接口的另一種說法，因此OSPF也稱為接口狀態路由協議。OSPF通過路由器之間通告網絡接口的狀態來建立鏈路狀態數據庫，生成最短路徑樹，每個OSPF路由器使用這些最短路徑構造路由表。\n1．有關命令\n全局設置\n任務 命令\n指定使用OSPF協議 router ospf process-id1\n指定與該路由器相連的網絡 network address wildcard-mask area area-id2\n指定與該路由器相鄰的節點地址 neighbor ip-address\n注：1、OSPF路由進程process-id必須指定範圍在1-65535，多個OSPF進程可以在同一個路由器上配置，但最好不這樣做。多個OSPF進程需要多個OSPF數據庫的副本，必須運行多個最短路徑算法的副本。process-id只在路由器內部起作用，不同路由器的process-id可以不同。\n2、wildcard-mask 是子網掩碼的反碼, 網絡區域ID area-id在0-4294967295內的十進制數，也可以是帶有IP地址格式的x.x.x.x。當網絡區域ID為0或0.0.0.0時為主幹域。不同網絡區域的路由器通過主幹域學習路由信息。\n2．基本配置舉例:\nRouter1:\ninterface ethernet 0\nip address 192.1.0.129 255.255.255.192\n!\ninterface serial 0\nip address 192.200.10.5 255.255.255.252\n!\nrouter ospf 100\nnetwork 192.200.10.4 0.0.0.3 area 0\nnetwork 192.1.0.128 0.0.0.63 area 1\n!\nRouter2:\ninterface ethernet 0\nip address 192.1.0.65 255.255.255.192\n!\ninterface serial 0\nip address 192.200.10.6 255.255.255.252\n!\nrouter ospf 200\nnetwork 192.200.10.4 0.0.0.3 area 0\nnetwork 192.1.0.64 0.0.0.63 area 2\n!\nRouter3:\ninterface ethernet 0\nip address 192.1.0.130 255.255.255.192\n!\nrouter ospf 300\nnetwork 192.1.0.128 0.0.0.63 area 1\n!\nRouter4:\ninterface ethernet 0\nip address 192.1.0.66 255.255.255.192\n!\nrouter ospf 400\nnetwork 192.1.0.64 0.0.0.63 area 1\n!\n相關調試命令：\ndebug ip ospf events\ndebug ip ospf packet\nshow ip ospf\nshow ip ospf database\nshow ip ospf interface\nshow ip ospf neighbor\nshow ip route\n3. 使用身份驗證\n為了安全的原因，我們可以在相同OSPF區域的路由器上啟用身份驗證的功能，只有經過身份驗證的同一區域的路由器才能互相通告路由信息。\n在默認情況下OSPF不使用區域驗證。通過兩種方法可啟用身份驗證功能，純文本身份驗證和消息摘要(md5)身份驗證。純文本身份驗證傳送的身份驗證口令為純文本，它會被網絡探測器確定，所以不安全，不建議使用。而消息摘要(md5)身份驗證在傳輸身份驗證口令前，要對口令進行加密，所以一般建議使用此種方法進行身份驗證。\n使用身份驗證時，區域內所有的路由器接口必須使用相同的身份驗證方法。為起用身份驗證，必須在路由器接口配置模式下，為區域的每個路由器接口配置口令。\n任務 命令\n指定身份驗證 area area-id authentication [message-digest]\n使用純文本身份驗證 ip ospf authentication-key password\n使用消息摘要(md5)身份驗證 ip ospf message-digest-key keyid md5 key\n以下列舉兩種驗證設置的示例，示例的網絡分佈及地址分配環境與以上基本配置舉例相同，只是在Router1和Router2的區域0上使用了身份驗證的功能。:\n1.使用純文本身份驗證\nRouter1:\ninterface ethernet 0\nip address 192.1.0.129 255.255.255.192\n!\ninterface serial 0\nip address 192.200.10.5 255.255.255.252\nip ospf authentication-key cisco\n!\nrouter ospf 100\nnetwork 192.200.10.4 0.0.0.3 area 0\nnetwork 192.1.0.128 0.0.0.63 area 1\narea 0 authentication\n!\nRouter2:\ninterface ethernet 0\nip address 192.1.0.65 255.255.255.192\n!\ninterface serial 0\nip address 192.200.10.6 255.255.255.252\nip ospf authentication-key cisco\n!\nrouter ospf 200\nnetwork 192.200.10.4 0.0.0.3 area 0\nnetwork 192.1.0.64 0.0.0.63 area 2\narea 0 authentication\n!\n例2.消息摘要(md5)身份驗證：\nRouter1:\ninterface ethernet 0\nip address 192.1.0.129 255.255.255.192\n!\ninterface serial 0\nip address 192.200.10.5 255.255.255.252\nip ospf message-digest-key 1 md5 cisco\n!\nrouter ospf 100\nnetwork 192.200.10.4 0.0.0.3 area 0\nnetwork 192.1.0.128 0.0.0.63 area 1\narea 0 authentication message-digest\n!\nRouter2:\ninterface ethernet 0\nip address 192.1.0.65 255.255.255.192\n!\ninterface serial 0\nip address 192.200.10.6 255.255.255.252\nip ospf message-digest-key 1 md5 cisco\n!\nrouter ospf 200\nnetwork 192.200.10.4 0.0.0.3 area 0\nnetwork 192.1.0.64 0.0.0.63 area 2\narea 0 authentication message-digest\n!\n相關調試命令：\ndebug ip ospf adj\ndebug ip ospf events\n四、重新分配路由\n在實際工作中，我們會遇到使用多個IP路由協議的網絡。為了使整個網絡正常地工作，必須在多個路由協議之間進行成功的路由再分配。\n以下列舉了OSPF與RIP之間重新分配路由的設置範例：\nRouter1的Serial 0端口和Router2的Serial 0端口運行OSPF，在Router1的Ethernet 0端口運行RIP 2，Router3運行RIP2，Router2有指向Router4的192.168.2.0/24網的靜態路由，Router4使用默認靜態路由。需要在Router1和Router3之間重新分配OSPF和RIP路由，在Router2上重新分配靜態路由和直連的路由。\n範例所涉及的命令\n任務 命令\n重新分配直連的路由 redistribute connected\n重新分配靜態路由 redistribute static\n重新分配ospf路由 redistribute ospf process-id metric metric-value\n重新分配rip路由 redistribute rip metric metric-value\nRouter1:\ninterface ethernet 0\nip address 192.168.1.1 255.255.255.0\n!\ninterface serial 0\nip address 192.200.10.5 255.255.255.252\n!\nrouter ospf 100\nredistribute rip metric 10\nnetwork 192.200.10.4 0.0.0.3 area 0\n!\nrouter rip\nversion 2\nredistribute ospf 100 metric 1\nnetwork 192.168.1.0\n!\nRouter2:\ninterface loopback 1\nip address 192.168.3.2 255.255.255.0\n!\ninterface ethernet 0\nip address 192.168.0.2 255.255.255.0\n!\ninterface serial 0\nip address 192.200.10.6 255.255.255.252\n!\nrouter ospf 200\nredistribute connected subnet\nredistribute static subnet\nnetwork 192.200.10.4 0.0.0.3 area 0\n!\nip route 192.168.2.0 255.255.255.0 192.168.0.1\n！\nRouter3:\ninterface ethernet 0\nip address 192.168.1.2 255.255.255.0\n!\nrouter rip\nversion 2\nnetwork 192.168.1.0\n!\nRouter4:\ninterface ethernet 0\nip address 192.168.0.1 255.255.255.0\n!\ninterface ethernet 1\nip address 192.168.2.1 255.255.255.0\n!\nip route 0.0.0.0 0.0.0.0 192.168.0.2\n!\n五、IPX協議設置\nIPX協議與IP協議是兩種不同的網絡層協議，它們的路由協議也不一樣，IPX的路由協議不象IP的路由協議那樣豐富，所以設置起來比較簡單。但IPX協議在以太網上運行時必須指定封裝形式。\n1． 有關命令\n啟動IPX路由 ipx routing\n設置IPX網絡及以太網封裝形式 ipx network network [encapsulation encapsulation-type]1\n指定路由協議，默認為RIP ipx router {eigrp autonomous-system-number | nlsp [tag] | rip}\n注：1.network 範圍是1 到FFFFFFFD.\nIPX封裝類型列表\n接口類型 封裝類型 IPX幀類型\nEthernet novell-ether (默認) arpa sap snap Ethernet_802.3 Ethernet_II Ethernet_802.2 Ethernet_Snap\nToken Ring sap (默認) snap Token-Ring Token-Ring_Snap\nFDDI snap (默認) sap novell-fddi Fddi_Snap Fddi_802.2 Fddi_Raw\n在此例中，WAN的IPX網絡為3a00,Router1所連接的局域網IPX網絡號為2a00,在此局域網有一台Novell服務器，IPX網絡號也是2a00, 路由器接口的IPX網絡號必須與在同一網絡的Novell服務器上設置的IPX網絡號相同。路由器通過監聽SAP來建立已知的服務及自己的網絡地址表，並每60秒發送一次自己的SAP表。\nRouter1:\nipx routing\ninterface ethernet 0\nipx network 2a00 encapsulation sap\n!\ninterface serial 0\nipx network 3a00\n!\nipx router eigrp 10\nnetwork 3a00\nnetwork 2a00\n!\nRouter2:\nipx routing\ninterface ethernet 0\nipx network 2b00 encapsulation sap\n!\ninterface serial 0\nipx network 3a00\n!\nipx router eigrp 10\nnetwork 2b00\nnetwork 3a00\n!\n相關調試命令：\ndebug ipx packet\ndebug ipx routing\ndebug ipx sap\ndebug ipx spoof\ndebug ipx spx\nshow ipx eigrp interfaces\nshow ipx eigrp neighbors\nshow ipx eigrp topology\nshow ipx interface\nshow ipx route\nshow ipx servers\nshow ipx spx-spoof\n關鍵字:子網掩碼 靜態路由 動態路由 ssl ospf\n","wordCount":"10694","inLanguage":"zh-cn","datePublished":"2007-03-28T14:30:16+08:00","dateModified":"2007-03-28T14:30:16+08:00","author":{"@type":"Person","name":"Seth"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://seth.dpdns.org/posts/cisco%E8%B7%AF%E7%94%B1%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE/"},"publisher":{"@type":"Organization","name":"Seth Dang'S","logo":{"@type":"ImageObject","url":"https://seth.dpdns.org/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://seth.dpdns.org/ accesskey=h title="Seth Dang'S (Alt + H)">Seth Dang'S</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://seth.dpdns.org/>Home</a>&nbsp;»&nbsp;<a href=https://seth.dpdns.org/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">cisco路由器的基本配置</h1><div class=post-meta><span title='2007-03-28 14:30:16 +0800 +0800'>March 28, 2007</span>&nbsp;·&nbsp;<span>22 min</span>&nbsp;·&nbsp;<span>10694 words</span>&nbsp;·&nbsp;<span>Seth</span></div></header><div class=post-content><p>1 ． 配 置 以 太 網（Ethernet） 端 口：</p><h1 id=conf-t>conf t<a hidden class=anchor aria-hidden=true href=#conf-t>#</a></h1><p>從終端配置路由器。</p><h1 id=int-e0>int e0<a hidden class=anchor aria-hidden=true href=#int-e0>#</a></h1><p>指定E0口。</p><h1 id=ip-addr-abcd-xxxx>ip addr ABCD XXXX<a hidden class=anchor aria-hidden=true href=#ip-addr-abcd-xxxx>#</a></h1><p>ABCD為以太網地址,XXXX為子網掩碼。</p><h1 id=ip-addr-abcd-xxxx-secondary>ip addr ABCD XXXX secondary<a hidden class=anchor aria-hidden=true href=#ip-addr-abcd-xxxx-secondary>#</a></h1><p>E0口同時支持兩個地址類型。如果第一個<br>為A類地址，則第二個為B或C類地址。</p><h1 id=no-shutdown>no shutdown<a hidden class=anchor aria-hidden=true href=#no-shutdown>#</a></h1><p>激活E0口。</p><h1 id=exit>exit<a hidden class=anchor aria-hidden=true href=#exit>#</a></h1><p>2．X.25的配置</p><h1 id=conf-t-1>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-1>#</a></h1><h1 id=int-s0>int S0<a hidden class=anchor aria-hidden=true href=#int-s0>#</a></h1><p>指定S0口.</p><h1 id=ip-addr-abcd-xxxx-1>ip addr ABCD XXXX<a hidden class=anchor aria-hidden=true href=#ip-addr-abcd-xxxx-1>#</a></h1><p>ABCD為以太網S0的IP地址,XXXX為子網掩碼.。</p><h1 id=encap-x25-abc>encap X25-ABC<a hidden class=anchor aria-hidden=true href=#encap-x25-abc>#</a></h1><p>封裝X.25協議。ABC指定X.25為DTC或DCE操作，缺省為DTE。</p><h1 id=x25-addr-abcd>x25 addr ABCD<a hidden class=anchor aria-hidden=true href=#x25-addr-abcd>#</a></h1><p>ABCD為S0的X.25端口地址,由郵電局提供。</p><h1 id=x25-map-ip-abcd-xxxx-br>x25 map ip ABCD XXXX br<a hidden class=anchor aria-hidden=true href=#x25-map-ip-abcd-xxxx-br>#</a></h1><p>映射的X.25地址.ABCD為對方路由器(如:S0)的<br>IP地址,XXXX為對方路由器(如:S0)的X.25端口地址。</p><h1 id=x25-htc-x>x25 htc X<a hidden class=anchor aria-hidden=true href=#x25-htc-x>#</a></h1><p>配置最高雙向通道數.X的取值範圍1-4095,<br>要根據郵電局實際提供的數字配置。</p><h1 id=x25-nvc-x>x25 nvc X<a hidden class=anchor aria-hidden=true href=#x25-nvc-x>#</a></h1><p>配置虛電路數。X不可超過據郵電局實際<br>提供的數,否則,將影響數據的正常傳輸。</p><h1 id=exit-1>exit<a hidden class=anchor aria-hidden=true href=#exit-1>#</a></h1><p>-&mdash; 3 ． 專 線 的 配 置：</p><h1 id=conf-t-2>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-2>#</a></h1><h1 id=int-s2>int S2<a hidden class=anchor aria-hidden=true href=#int-s2>#</a></h1><p>指定S2口。</p><h1 id=ip-addr-abcd-xxxx-2>ip addr ABCD XXXX<a hidden class=anchor aria-hidden=true href=#ip-addr-abcd-xxxx-2>#</a></h1><p>ABCD為S2的IP地址,XXXX為子網掩碼。</p><h1 id=exit-2>exit<a hidden class=anchor aria-hidden=true href=#exit-2>#</a></h1><p>4．幀中繼的配置</p><h1 id=conf-t-3>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-3>#</a></h1><h1 id=int-s0-1>int s0<a hidden class=anchor aria-hidden=true href=#int-s0-1>#</a></h1><h1 id=ip-addr-abcd-xxxx-3>ip addr ABCD XXXX<a hidden class=anchor aria-hidden=true href=#ip-addr-abcd-xxxx-3>#</a></h1><p>ABCD為S0的IP地址,XXXX為子網掩碼。</p><h1 id=encap-frante_relay>encap frante_relay<a hidden class=anchor aria-hidden=true href=#encap-frante_relay>#</a></h1><p>封裝frante_relay協議。</p><h1 id=no-nrzi_encoding>no nrzi_encoding<a hidden class=anchor aria-hidden=true href=#no-nrzi_encoding>#</a></h1><p>NRZI=NO</p><h1 id=frame_relay-lmi_type-q933a>frame_relay lmi_type q933a<a hidden class=anchor aria-hidden=true href=#frame_relay-lmi_type-q933a>#</a></h1><p>LMI使用Q933A標準．LMI（Local management Interface）有3種：ANSI：T1.617；CCITTY：Q933A和CISCO特有的標準。</p><h1 id=fram-relay-intf-typ-abc>fram-relay intf-typ ABC<a hidden class=anchor aria-hidden=true href=#fram-relay-intf-typ-abc>#</a></h1><p>ABC為幀中繼設備類型，它們分別是DTE設備，DCE交換機或NNI（網絡接點接口）支持。</p><h1 id=frame_relay-interface_dlci-110-br>frame_relay interface_dlci 110 br<a hidden class=anchor aria-hidden=true href=#frame_relay-interface_dlci-110-br>#</a></h1><p>配置DLCI(數據鏈路連接標識符)。</p><h1 id=frame-relay-map-ip-abcd-xxxx-broadcast>frame-relay map ip ABCD XXXX broadcast<a hidden class=anchor aria-hidden=true href=#frame-relay-map-ip-abcd-xxxx-broadcast>#</a></h1><p>建立幀中繼映射。ABCD為對方ip地址，XXXX為本地DLCI號，broadcast允許廣播向前轉發或更新路由。</p><h1 id=no-shutdown-1>no shutdown<a hidden class=anchor aria-hidden=true href=#no-shutdown-1>#</a></h1><p>激活本端口．</p><h1 id=exit-3>exit<a hidden class=anchor aria-hidden=true href=#exit-3>#</a></h1><p>-&mdash; 5 ． 幀 中 繼 子 接 口 的 配 置：</p><h1 id=conf-ｔ>conf ｔ<a hidden class=anchor aria-hidden=true href=#conf-ｔ>#</a></h1><h1 id=int-s01-point-to-point>int s0.1 point-to-point<a hidden class=anchor aria-hidden=true href=#int-s01-point-to-point>#</a></h1><p>對應S0的子接口1，點對點方式。</p><h1 id=ip-addr-abcd-xxxx-4>ip addr ABCD XXXX<a hidden class=anchor aria-hidden=true href=#ip-addr-abcd-xxxx-4>#</a></h1><p>ABCD為子口1的IP地址,XXXX為子網掩碼。</p><h1 id=frame-relay-intreface-dlci-100-br>frame-relay intreface-dlci 100 br<a hidden class=anchor aria-hidden=true href=#frame-relay-intreface-dlci-100-br>#</a></h1><p>6．配置撥號備份<br>(1)．配置備份主口</p><h1 id=conf-t-4>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-4>#</a></h1><h1 id=int-s0-2>int s0<a hidden class=anchor aria-hidden=true href=#int-s0-2>#</a></h1><p>S0為主口．</p><h1 id=backup-int-asy-1>backup int asy 1<a hidden class=anchor aria-hidden=true href=#backup-int-asy-1>#</a></h1><p>A1口為備份口．</p><h1 id=backup-delay-0-1>backup delay 0 1<a hidden class=anchor aria-hidden=true href=#backup-delay-0-1>#</a></h1><p>延時1秒．<br>(2)．配置虛擬接口</p><h1 id=conf-t-5>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-5>#</a></h1><h1 id=ip-addr-abcd-xxxx-5>ip addr ABCD XXXX<a hidden class=anchor aria-hidden=true href=#ip-addr-abcd-xxxx-5>#</a></h1><p>ABCD為虛擬接口IP地址,XXXX為子網掩碼。</p><h1 id=encap-ppp>encap ppp<a hidden class=anchor aria-hidden=true href=#encap-ppp>#</a></h1><p>封裝ppp協議．</p><h1 id=dialer-in-band>dialer in-band<a hidden class=anchor aria-hidden=true href=#dialer-in-band>#</a></h1><p>激活隨叫隨撥功能．</p><h1 id=dialer-idle-timeout-7200>dialer idle-timeout 7200<a hidden class=anchor aria-hidden=true href=#dialer-idle-timeout-7200>#</a></h1><h1 id=dialer-map-ip-abcd-modem-script-call-broadcast-6225481-br-映射對應的撥號口>dialer map ip ABCD modem-script call broadcast 6225481 br 映射對應的撥號口．<a hidden class=anchor aria-hidden=true href=#dialer-map-ip-abcd-modem-script-call-broadcast-6225481-br-映射對應的撥號口>#</a></h1><p>ABCD為對方撥號口的ip地址，6225481為對應的電話號碼。</p><h1 id=dialer_group-1-定義撥號組成員>dialer_group 1 定義撥號組成員．<a hidden class=anchor aria-hidden=true href=#dialer_group-1-定義撥號組成員>#</a></h1><p>(3)．配置防火牆</p><h1 id=dialer_list-1-pro-ip-permit>dialer_list 1 pro ip permit<a hidden class=anchor aria-hidden=true href=#dialer_list-1-pro-ip-permit>#</a></h1><p>允許ip協議通過。<br>(4)．配置連接口令</p><h1 id=user-name-abcd-pass-xxxx>user name ABCD pass XXXX<a hidden class=anchor aria-hidden=true href=#user-name-abcd-pass-xxxx>#</a></h1><p>ABCD為對方主機名,XXXX為連接口令．<br>(5)．配置撥號字符串</p><h1 id=conf-t-6>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-6>#</a></h1><h1 id=chat-script-call-abort-busy-abort-error-atdt-6335481-timeout-45-connect>chat-script call ABORT BUSY ABORT ERROR"" atdt 6335481 TIMEOUT 45 &ldquo;CONNECT&rdquo;<a hidden class=anchor aria-hidden=true href=#chat-script-call-abort-busy-abort-error-atdt-6335481-timeout-45-connect>#</a></h1><p>6335481為對方電話號碼。<br>（6）．配置撥號連接密碼</p><h1 id=conf-t-7>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-7>#</a></h1><h1 id=username-rou1-pass-xxxx>username ROU1 pass XXXX<a hidden class=anchor aria-hidden=true href=#username-rou1-pass-xxxx>#</a></h1><p>ROU1為對方路由器名，XXXX為連接密碼。<br>(7)．配置線路</p><h1 id=conf-ｔ-1>conf ｔ<a hidden class=anchor aria-hidden=true href=#conf-ｔ-1>#</a></h1><h1 id=line-aux-0>line aux 0<a hidden class=anchor aria-hidden=true href=#line-aux-0>#</a></h1><h1 id=modem-inout>modem inout<a hidden class=anchor aria-hidden=true href=#modem-inout>#</a></h1><p>MODEM雙向傳輸。</p><h1 id=modem-autoconfigure-discovery>modem autoconfigure discovery<a hidden class=anchor aria-hidden=true href=#modem-autoconfigure-discovery>#</a></h1><h1 id=transport-input-all>transport input all<a hidden class=anchor aria-hidden=true href=#transport-input-all>#</a></h1><h1 id=rxspeed-51200>rxspeed 51200<a hidden class=anchor aria-hidden=true href=#rxspeed-51200>#</a></h1><p>MODEM的收發速率為51200 。</p><h1 id=exit-4>exit<a hidden class=anchor aria-hidden=true href=#exit-4>#</a></h1><p>7．配置同步/異步口 （適用於2522）</p><h1 id=conf-t-8>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-8>#</a></h1><h1 id=int-s2-1>int s2<a hidden class=anchor aria-hidden=true href=#int-s2-1>#</a></h1><h1 id=ph-asyn>ph asyn<a hidden class=anchor aria-hidden=true href=#ph-asyn>#</a></h1><p>配置S2為異步口．</p><h1 id=ph-sync>ph sync、<a hidden class=anchor aria-hidden=true href=#ph-sync>#</a></h1><p>配置S2為同步口．<br>8．動態路由的配置</p><h1 id=conf-t-9>conf t<a hidden class=anchor aria-hidden=true href=#conf-t-9>#</a></h1><h1 id=router-eigrp-20>router eigrp 20<a hidden class=anchor aria-hidden=true href=#router-eigrp-20>#</a></h1><p>使用EIGRP路由協議。常用的路由協議有RIP，IGRP，IS-IS等。</p><h1 id=passive-interface-serial0>passive-interface serial0<a hidden class=anchor aria-hidden=true href=#passive-interface-serial0>#</a></h1><p>若S0與X.25相連，則輸入本條指令。</p><h1 id=passive-interface-serial1>passive-interface serial1<a hidden class=anchor aria-hidden=true href=#passive-interface-serial1>#</a></h1><p>若S1與X.25相連，則輸入本條指令。</p><h1 id=network-abcd>network ABCD<a hidden class=anchor aria-hidden=true href=#network-abcd>#</a></h1><p>ABCD為本機的以太網地址。</p><h1 id=network-xxxx>network XXXX<a hidden class=anchor aria-hidden=true href=#network-xxxx>#</a></h1><p>XXXX為S0的ip地址。</p><h1 id=no-auto-summary>no auto-summary<a hidden class=anchor aria-hidden=true href=#no-auto-summary>#</a></h1><h1 id=exit-5>exit<a hidden class=anchor aria-hidden=true href=#exit-5>#</a></h1><p>9．靜態路由的配置</p><h1 id=ip-router-abcd-xxxx-yyyy-90>ip router ABCD XXXX YYYY 90<a hidden class=anchor aria-hidden=true href=#ip-router-abcd-xxxx-yyyy-90>#</a></h1><p>ABCD為對方路由器的以太網地址；XXXX為子網掩碼.；YYYY為對方對應的廣域網端口地址。</p><h1 id=dialer-list-1-protocol-ip-permail>dialer-list 1 protocol ip permail<a hidden class=anchor aria-hidden=true href=#dialer-list-1-protocol-ip-permail>#</a></h1><p>10．備份配置文件到硬盤</p><h1 id=copy-run-tftp>copy run tftp<a hidden class=anchor aria-hidden=true href=#copy-run-tftp>#</a></h1><p>在硬盤上建立一個空文件且有讀寫權限,才能備份成功．<br>11．恢復備份配置文件到路由器</p><h1 id=copy-tftp-run>copy tftp run<a hidden class=anchor aria-hidden=true href=#copy-tftp-run>#</a></h1><p>12．在路由器上建一個備份</p><h1 id=copy-run-start>copy run start<a hidden class=anchor aria-hidden=true href=#copy-run-start>#</a></h1><p>路由器的配置參數較多，可根據實際需要增減，<br>限於篇幅，本文僅給出了一般的常用配置。<br>-&mdash; ． 調 試<br>-&mdash; 1. 首 先 將 路 由 器 的Ethernet 口 和 所 有 要 使 用 的 串 口 都 激 活， 方 法 是 進 入 該 口， 執 行No Shutdown。<br>-&mdash; 2. 將 和 路 由 器 相 連 的 主 機 加 上 缺 省 路 由（ 中 心 路 由 器 的Ethernet 地 址）， 方 法 是 在UNIX 系 統 的 超 級 用 戶 下 執 行：router add defaule XXXX 1（XXXX 為 路 由 器 的E0 口 地 址）。 每 台 主 機 都 要 加 缺 省 路 由， 否 則， 將 不 能 正 常 通 訊。<br>-&mdash; 3. Ping 本 機 的 路 由 器Ethernet 網 口（ 若 不 通：（1）Ethetnet 網 口 沒 有 激 活（2） 不 在 一 個 網 上）、 廣 域 網 口（ 若 不 通： 沒 有 加 缺 省 路 由）， 對 方 廣 域 網 口（ 若 不 通： 路 由 器 配 置 錯 誤）、 路 由 器Ethernet 網 口（ 若 不 通： 路 由 器 配 置 錯 誤）、 主 機Ethernet 網 口（ 若 不 通： 對 方 主 機 沒 有 加 缺 省 路 由）。<br>-&mdash; 4. 在 專 線 卡(X.25) 主 機 上 加 網 關（ 靜 態 路 由）， 方 法 是 在UNIX 系 統 的 超 級 用 戶 下 執 行：router add X.X.X.X Y.Y.Y.Y 1。 X.X.X.X 為 對 方Ethernet 網 地 址；Y.Y.Y.Y 為 對 方 廣 域 網 地 址。<br>-&mdash; 5. 使 用Tracert 對 路 由 進 行 跟 蹤， 以 確 定 不 通 網 段。<br>WAN的配置<br>1、 配置DDR<br>Dial-on-demand routing(DDR)是用公共電話網提供了網絡連接.通常的,廣域網大多數用專線連接的,路由器連接到類似modem或ISDN TAs的數據終端DCE設備上,它們支持同步V.25bis協議,你可以用scripts和dialer命令設定撥號串.DDR比較適用於用戶對數率要求不高,偶爾有數據傳輸或只是在特定時候傳輸數據,比如銀行每晚傳送報表等等情況下.當一個感興趣的包到達路由器時,產生一個DDR請求.路由器發送呼叫建立信息給指定的串口的DCE設備.這個呼叫就把本地和遠程的設備連接起來.一旦沒有數據傳輸,空閒時間開始計時,超過設置的空閒時間,這一次連接終止.DDR現在都用靜態路由來傳輸數據包,避免路由交換引起的DDR撥號.AppleTalk,Banyan VINES, CLNS, DECnet, IP, IPX, 和XNS可以通過DDR路由尋址.同步串口,異步串口和ISDN端口可以配置成到一個或多個目的地DDR連接.在配置DDR過程中,我們可以把一個或幾個物理接口配置成一個邏輯撥號接口,它可以是同步V.25方式,同步DTR啟動撥號或異步chat script方式.在端口配置模式下:</p><p>功能命令<br>在一個端口上激活 Dial-on-demand routing dialer in-band<br>指定一個端口為撥號訪問組 dialer-group group-number<br>指定一個單一電話號碼 dialer string dial-string<br>斷線前空閒等待時間 dialer idle-time seconds<br>定義一個或多個目的電話號碼表 dialer map protocol net-hop-address dialer-string<br>限定傳輸的access-list表或特定協議 dialer-list dialer-group list access-list-number<br>或 dialer-list dialer-group protocol protocol-name {permit|deny|list acce ss-list-number}<br>其中dialer string和dialer map兩條命令任選一,dialer string是在只有一個電話號碼時用,而dialer map是一個電話號碼表.<br>詳細配置說明請參閱下面"DDR Example"的實例.<br>配置撥號備份<br>撥號備份提供了一種保護,使得當廣域網上主幹線出現故障時,啟動一條備份線路,使通信正常運轉.<br>啟動備份有兩種情況:<br>主幹線斷掉<br>傳輸流量超過了定義的最大值<br>需作的定義如下:<br>在主幹線路端口上設置它的備份端口 backup interface interface-name<br>定義備份負載 backup load {enable-threshold | never} {disable-load |never}<br>定義主幹線up或down的響應時間 backup delay {enable-delay | never) {disable-delay | never}<br>其中: enable-threshold &mdash; 表示主幹線超過總傳輸量的百分比,啟動備份線路<br>disable-load &mdash; 表示傳輸量減少百分之多少就斷開備份線路.<br>enable-delay &mdash; 表示主幹線斷開多長時間後,啟動備份線路.<br>disable-delay &mdash; 表示主幹線又重新恢復多長時間後,斷開備份線路.<br>2、 配置幀中繼<br>幀中繼是一種由ANSI和CCITT標準化的協議,它能為現今突發性業務流量(如LAN互連及SNA業務)提供顯著的性能價格優勢.幀中繼是客戶端設備(CPE),諸如路由器或前端處理器,和一個向遠程CPE發送數據的廣域網之間的一種接口協議.它有以下幾個特點:低時延，時延是指一個給定待發送幀穿過網絡到達遠程用戶設備所用的時間.當網絡時延增大時,性能會下降;尤其對於敏感協議(如SNA和DECnet),所有幀被發送後必須等待應答的協議(即Novell IPX),以及利用短交易式的應用.可靠性，在給定時延條件下,吞吐量隨著網絡的可靠性變化而變化,可靠性好,超時等待重發幀越少,吞吐量就會大大增加.更低的聯網開銷可預測性在許多網絡環境中,如SNA CICS,不僅要求時延低,而且需要可預測性.公平性。Ciscos Frame Relay目前支持IP,DECnet,AppleTalk, Xerox Network Service(XNS), Novell IPX, International Organization for Standards (ISO) Connectionless Network Service (CLNS), Banyan VINES, 和 transparent bridging在幀中繼中傳輸.<br>配置幀中繼的工作表:<br>在一個端口上作幀中繼打包<br>定義動態或靜態的地址映射<br>定義LMI<br>配置幀中繼交換虛電路<br>幀中繼交換<br>監控幀中繼連接<br>在一個端口上作幀中繼打包<br>某一端口上配置幀中繼打包走幀中繼協議,在global配置模式下:<br>功 能 命 令<br>指定走幀中繼的端口並進入端口配置模式 interface serial number<br>指定幀中繼打包方式 encapsulation frame-relay [ietf]<br>Cisco的幀中繼與RFC 1490的打包方式一致,允許不同廠家的產品互相通信.當與其它廠家路由器連接時,請用IETF打包.<br>定義動態或靜態的地址映射<br>動態地址映射<br>動態地址映射用幀中繼的翻轉ARP協議發送請求下一個希望到達的地址(next hopprotocol address)(假設知道DLCI),當有應答翻轉ARP協議請求時,保存在address-to-DLCI映射表中,這張表就用來提供下一個希望到達的地址或出去的DLCI地址翻轉ARP協議默認是打開的,故動態地址映射不需要做任何配置.<br>靜態地址映射<br>一個靜態地址映射是人為的指定下一個希望到達的地址(next hop protocol address)與DLCI的對應關係.當指定了靜態地址映射時,翻轉ARP協議自動關閉.<br>建立靜態地址映射表需完成:<br>功 能 命 令<br>定義一個端口或子端口的DLCI地址 frame-relay interface-dlci dlci<br>指定一個next hop protocol address與DLCI之間對應 frame-relay map protocol protocol-address dlci [broadcast] [ietf] [cisco]相應地,關鍵字protocol支持的協議:<br>IP&mdash;ip<br>DECnet&mdash;decnet</p><p>AppleTalk&mdash;appletalk<br>XNS&mdash;xns<br>Novell IPX&mdash;ipx<br>VINES&mdash;vines<br>ISO CLNS&mdash;clns<br>如果是一點對一點,可用interface-dlci命令,若是一點對多點則設定 frame-relay map 一系列的dlci與ip address 對應表.<br>定義LMII<br>在Cisco IOS Release 11.2版本以上,支持本地管理接口LMI(Local managementInterface)自動識別,即由交換機端口決定LMI的類型.當然,我們也可以明確配置<br>LMI類型.<br>功 能 命 令<br>建立路由器間keepalive時間 frame-relay keepalive number<br>定義N391的間隔時間 frame-relay lmi-n391-dte keep-exchanges<br>配置幀中繼交換虛電路<br>目前,訪問幀中繼網是56K到45M數率,幀中繼是在兩個節點間建立面向連接的,包交換的虛電路.<br>在一個物理端口上配置SVCs<br>在子端口上配置SVCs<br>在一個幀中繼端口上配置SVC操作</p><p>功 能 命 令<br>指定物理端口 interface serial number<br>如果需要,配置IP地址 ip address ip-address mask<br>在這個端口上配置幀中繼打包 encapsulation frame-relay<br>在這個端口上激活幀中繼SVC frame-relay svc</p><p>在子端口上配置SVCs</p><p>功 能 命 令<br>在主端口上指定一個子端口 interface serial number.subinterface-number {multipoint | point-to-point}<br>如果需要,配置IP地址 ip address ip-address mask<br>參閱下面"Configure subinterface Example"的例子.</p><p>幀中繼交換</p><p>當一個幀中繼網要通過IP網與另一個幀中繼網互連,就要用到幀中繼交換.把IP網<br>看作幀中繼包的隧道通過去.<br>實現幀中繼交換,配置如下:<br>功 能 命 令<br>把路由器作為幀中繼交換機 frame-relay switching<br>在路由器上設置靜態路由 frame-relay route in-dlci out-interface out-dlci<br>定義網絡功能 frame-relay intf-type {dte| dce| nni}<br>請參閱"Frame Relay Switching Example"配置實例.<br>監控幀中繼連接<br>在EXEC模式下:<br>功 能 命 令<br>顯示幀中繼DLCI和LMI信息 show interface serial number<br>顯示LMI狀態 show frame-relay lmi [type number]<br>顯示PVC狀態 show frame-relay pvc [type number [dlci]]<br>顯示配置靜態路由 show frame-relay route<br>顯示幀中繼傳輸狀態 show frame-relay traffic<br>3、配置DDN<br>DDN(Digital Data Network)是一種點對點的同步數據通信鏈路.它支持PPP,SLIP,HDLC和SDLC等鏈路層通信協議.允許IP, Novell IPX, Bridging,CLNS,AppleTalk,DECnet等多種上層協議在上面運行.</p><p>基本配置<br>壓縮技術<br>E1端口配置<br>基本配置</p><p>功 能 命 令<br>進入指定端口 interface serial number<br>定義該端口IP地址 ip address ip-address mask<br>指定該端口打包方式 encapsulation {PPP| HDLC }</p><p>壓縮技術</p><p>通常在串口中傳輸的數據是不壓縮的,它允許數據包頭在每次傳輸時正常交換,但每次將浪費帶寬.目前支持的壓縮有PPP,Frame Relay, X.25, TCP等等.</p><p>Cisco的壓縮是通過軟件完成的,將影響系統性能.故建議路由器CPU佔用超過65%,就不要使用壓縮.(show process cpu EXEC命令查看當前CPU使用情況)</p><p>功 能 命 令<br>TCP傳輸頭壓縮 ip tcp head-compression [passive]<br>X.25壓縮 X25 compress<br>PPP壓縮 ppp compress [predictir|stac]</p><p>注: &ldquo;passive"表示只有輸入包是壓縮時,輸出包才壓縮.</p><p>E1端口配置</p><p>在Cisco 4500,4700,7000和7500系列裏面均支持E1(2.048Mbps)數率的接口.每一個E1端口可以按時隙分成30路64K數據線路和2路信號線路.這30個64K數據線路每一路均可以當作一條64K的專線.</p><p>功 能 命 令<br>在配置模式下,定義Controller E1 controller e1 slot/port<br>定義line code linecode {ami |hdb3}<br>定義字符幀 framing {crc4 |no-crc4}<br>定義E1組 channel-group number timeslots range [speed {48| 56| 64}]<br>指定串口屬於那一個channel-group組 interface serial slot/port:channel-group<br>注:slot/port&mdash;-是針對7000或7500系列的,故區分槽口號和端口號.<br>linecode&mdash;-默認是HDB3.<br>framing&mdash;-默認是crc4,要與電信局參數匹配.<br>channel-group&mdash;-每個E1可以分成30個channel-group,把channel-group和時間槽對應起來.channel-group是0-30,timeslots是1-31.<br>interface serial&mdash;-在定義完E1 channel-group後,我們把group賦予成一個虛擬串口.<br>具體的請參閱"Channelized E1 Interface Example"實例.<br>4、配置X.25</p><p>X.25配置完成如下工作:<br>功 能 命 令<br>設置X.25模式 encapsulation x25 [dte|dce]<br>設置最大虛電路數 x25 htc max-vc-number<br>設置X.121地址 x25 address x121-address<br>建立IP地址與X.121地址對應 x25 map ip ip-address x121-addres [broadcast]<br>htc&mdash;-htc是最大的虛電路數,因為許多X.25交換機是從高到低建立虛電路的,max-vc-number不能超過申請的最大值.<br>請參閱"X.25 Example"的配置實例.<br>5、配置HDLC:<br>HDLC是CISCO路由器使用的缺省協議，一台新路由器在未指定封裝協議時默認使用HDLC封裝。<br>A.有關命令<br>端口設置:<br>任務 命令<br>設置HDLC封裝 encapsulation hdlc<br>設置DCE端線路速度 clockrate speed<br>復位一個硬件接口 clear interface serial unit<br>顯示接口狀態 show interfaces serial [unit] 1<br>注:1.以下給出一個顯示Cisco同步串口狀態的例子.</p><p>Router#show interface serial 0<br>Serial 0 is up, line protocol is up<br>Hardware is MCI Serial<br>Internet address is 150.136.190.203, subnet mask is 255.255.255.0<br>MTU 1500 bytes, BW 1544 Kbit, DLY 20000 usec, rely 255/255, load 1/255<br>Encapsulation HDLC, loopback not set, keepalive set (10 sec)<br>Last input 0:00:07, output 0:00:00, output hang never<br>Output queue 0/40, 0 drops; input queue 0/75, 0 drops<br>Five minute input rate 0 bits/sec, 0 packets/sec<br>Five minute output rate 0 bits/sec, 0 packets/sec<br>16263 packets input, 1347238 bytes, 0 no buffer<br>Received 13983 broadcasts, 0 runts, 0 giants<br>2 input errors, 0 CRC, 0 frame, 0 overrun, 0 ignored, 2 abort<br>22146 packets output, 2383680 bytes, 0 underruns<br>0 output errors, 0 collisions, 2 interface resets, 0 restarts<br>1 carrier transitions<br>B. 舉例:<br>設置如下：<br>Router1:</p><p>interface Serial0<br>ip address 192.200.10.1 255.255.255.0<br>clockrate 1000000<br>Router2:</p><p>interface Serial0<br>ip address 192.200.10.2 255.255.255.0<br>!<br>C. 舉例使用E1線路實現多個64K專線連接.<br>相關命令:<br>任務 命令<br>進入controller配置模式 controller {t1 | e1} number<br>選擇幀類型 framing {crc4 | no-crc4}<br>選擇line-code類型 linecode {ami | b8zs | hdb3}<br>建立邏輯通道組與時隙的映射 channel-group number timeslots range1<br>顯示controllers接口狀態 show controllers e1 [slot/port]2<br>注: 1. 當鏈路為T1時,channel-group編號為0-23, Timeslot範圍1-24; 當鏈路為E1時, channel-group編號為0-30, Timeslot範圍1-31.<br>2.使用show controllers e1觀察controller狀態,以下為幀類型為crc4時controllers正常的狀態.<br>Router# show controllers e1<br>e1 0/0 is up.<br>Applique type is Channelized E1 - unbalanced<br>Framing is CRC4, Line Code is HDB3 No alarms detected.<br>Data in current interval (725 seconds elapsed):<br>0 Line Code Violations, 0 Path Code Violations<br>0 Slip Secs, 0 Fr Loss Secs, 0 Line Err Secs, 0 Degraded Mins<br>0 Errored Secs, 0 Bursty Err Secs, 0 Severely Err Secs, 0 Unavail Secs<br>Total Data (last 24 hours) 0 Line Code Violations, 0 Path Code Violations,<br>0 Slip Secs, 0 Fr Loss Secs, 0 Line Err Secs, 0 Degraded Mins,<br>0 Errored Secs, 0 Bursty Err Secs, 0 Severely Err Secs, 0 Unavail Secs<br>以下例子為E1連接3條64K專線, 幀類型為NO-CRC4,非平衡鏈路,路由器具體設置如下:</p><p>shanxi#wri t<br>Building configuration&mldr;<br>Current configuration:<br>!<br>version 11.2<br>no service udp-small-servers<br>no service tcp-small-servers<br>!<br>hostname shanxi<br>!<br>enable secret 5 $1$XN08$Ttr8nfLoP9.2RgZhcBzkk/<br>enable password shanxi<br>!<br>!<br>ip subnet-zero<br>!<br>controller E1 0<br>framing NO-CRC4<br>channel-group 0 timeslots 1<br>channel-group 1 timeslots 2<br>channel-group 2 timeslots 3<br>!<br>interface Ethernet0<br>ip address 133.118.40.1 255.255.0.0<br>media-type 10BaseT<br>!<br>interface Ethernet1<br>no ip address<br>shutdown<br>!<br>interface Serial0:0<br>ip address 202.119.96.1 255.255.255.252<br>no ip mroute-cache<br>!<br>interface Serial0:1<br>ip address 202.119.96.5 255.255.255.252<br>no ip mroute-cache<br>!<br>interface Serial0:2<br>ip address 202.119.96.9 255.255.255.252<br>no ip mroute-cache<br>!<br>no ip classless<br>ip route 133.210.40.0 255.255.255.0 Serial0:0<br>ip route 133.210.41.0 255.255.255.0 Serial0:1<br>ip route 133.210.42.0 255.255.255.0 Serial0:2<br>!<br>line con 0<br>line aux 0<br>line vty 0 4<br>password shanxi<br>login<br>!<br>end<br>6、配置PPP:<br>PPP(Point-to-Point Protocol)是SLIP(Serial Line IP protocol)的繼承者，它提供了跨過同步和異步電路實現路由器到路由器(router-to-router)和主機到網絡(host-to-network)的連接。</p><p>CHAP(Challenge Handshake Authentication Protocol)和PAP(Password Authentication Protocol) (PAP)通常被用於在PPP封裝的串行線路上提供安全性認證。使用CHAP和PAP認證,每個路由器通過名字來識別，可以防止未經授權的訪問。</p><p>CHAP和PAP在RFC 1334上有詳細的說明。</p><p>A. 有關命令<br>端口設置<br>任務 命令<br>設置PPP封裝 encapsulation ppp1<br>設置認證方法 ppp authentication {chap | chap pap | pap chap | pap} [if-needed] [list-name | default] [callin]<br>指定口令 username name password secret<br>設置DCE端線路速度 clockrate speed<br>注：1、要使用CHAP/PAP必須使用PPP封裝。在與非Cisco路由器連接時，一般採用PPP封裝，其它廠家路由器一般不支持Cisco的HDLC封裝協議。<br>2. 舉例<br>路由器Router1和Router2的S0口均封裝PPP協議，採用CHAP做認證，在Router1中應建立一個用戶，以對端路由器主機名作為用戶名，即用戶名應為router2。同時在Router2中應建立一個用戶，以對端路由器主機名作為用戶名，即用戶名應為router1。所建的這兩用戶的password必須相同。<br>設置如下：<br>Router1:</p><p>hostname router1<br>username router2 password xxx<br>interface Serial0<br>ip address 192.200.10.1 255.255.255.0<br>clockrate 1000000<br>ppp authentication chap<br>!<br>Router2:</p><p>hostname router2<br>username router1 password xxx<br>interface Serial0<br>ip address 192.200.10.2 255.255.255.0<br>ppp authentication chap</p><p>7、廣域網配置實例</p><p>DDR Example<br>Dial Backup Example<br>Configure subinterface Example<br>Frame Relay Switching Example<br>Channelized E1 Interface Example<br>X.25 Example<br>DDR Example</p><p>例：</p><p>Configuration for RouterA:</p><p>ip route 131.108.29.0 131.108.126.2<br>ip route 131.108.1.0 131.108.126.2<br>dialer-list 1 protocol ip permit<br>dialer-list 1 protocol ipx deny<br>!<br>interface serial 0<br>ip address 131.108.126.1 255.255.255.0<br>dialer in-band<br>dialer-group 1<br>!<br>dialer map ip 131.108.126.2 5551234<br>!<br>dialer idle-timeout 300</p><p>Dial Backup Example</p><p>A)同步V.25 bits方式</p><p>Configuration for RouterA:</p><p>interface Serial0:0<br>backup delay 0 10<br>backup interface Serial10<br>ip address 16.217.30.2 255.255.255.252<br>!<br>interface Serial10<br>ip address 16.30.16.81 255.255.255.0<br>encapsulation ppp<br>dialer in-band<br>dialer string 8292<br>dialer-group 1<br>pulse-time 1<br>!<br>dialer-list 1 protocol ip permit</p><p>B)輔助口作撥號備份</p><p>Configuration for RouterA:</p><p>chat-script MYDIAL "&rdquo; &ldquo;atdt 8292&rdquo; TIMEOUT 60 &ldquo;CONNECT&rdquo;<br>!<br>interface Serial0<br>backup delay 0 0<br>backup interface Async1<br>ip address 16.3.1.1 255.255.255.0</p><p>encapsulation ppp<br>!<br>interface Async1<br>ip address 16.3.2.1 255.255.255.0<br>encapsulation ppp<br>keepalive 9<br>async default routing<br>async dynamic address<br>async dynamic routing<br>async mode dedicated<br>dialer in-band<br>dialer string 8292<br>dialer-group 1<br>!<br>dialer-list 1 protocol ip permit<br>!<br>line aux 0<br>script dialer MYDIAL<br>modem InOut<br>transport output none<br>stopbits 1<br>flowcontrol hardware<br>speed 9600</p><p>Subinterface Example(Frame Relay)</p><p>Configuration for RouterA:</p><p>interface serial 0<br>encapsulation frame-relay<br>interface s 0.1 multipoint<br>ip address 11.10.11.1 255.255.255.0<br>frame-relay interface-dlci 41<br>frame-relay interface-dlci 42</p><p>Configuration for RouterC:</p><p>interface serial 0<br>encapsulation frame-relay<br>interface s 0.1 point-to-point<br>ip address 11.10.16.2 255.255.255.0<br>frame-relay interface-dlci 46</p><p>Configuration for RouterB:</p><p>interface serial 0<br>encapsulation frame-relay<br>interface s 0.1 multipoint<br>ip address 11.10.11.3 255.255.255.0<br>frame-relay interface-dlci 43<br>frame-relay interface-dlci 44<br>!<br>interface s 0.2 point-to-point<br>ip address 11.10.13.1 255.255.255.0<br>frame-relay interface-dlci 48</p><p>Frame Relay Switching Example</p><p>Configuration for RouterA:</p><p>frame-relay switching<br>!<br>int s 0<br>no ip address<br>frame-relay encapsulation<br>frame-relay route 167 tun0 43<br>frame-relay intf-type dce<br>!<br>int s 1<br>ip address 131.108.100.1 255.255.255.0<br>!<br>int tu 0<br>tunnel source serial 1<br>tunnel destination 131.108.13.2</p><p>Configuration for RouterB:</p><p>frame-relay switching<br>!<br>int s 0<br>no ip address<br>frame-relay encapsulation<br>frame-relay route 9 tun0 43<br>frame-relay intf-type dce<br>!<br>int s 1<br>ip address 131.108.13.2 255.255.255.0<br>!<br>int tu 0<br>tunnel source serial 1<br>tunnel destination 131.108.100.1</p><p>Channelized E1 Interface Example</p><p>假設是7500系列路由器,E1接口(MIP板)在插槽4上面.一個channel-group可對應多個時間槽,本例中serial4/0:1有5*64Kbps的數率.<br>Configuration for Router:</p><p>controller E1 0<br>framing NO-CRC4<br>channel-group 0 timeslots 1<br>channel-group 1 timeslots 2,7-9,20 speed 64<br>!<br>interface Serial4/0:0<br>ip address 16.217.30.2 255.255.255.252<br>encapsulation ppp<br>!<br>interface Serial4/0:1<br>ip address 16.205.30.5 255.255.255.252</p><p>X.25 Example</p><p>在配置X.25時,為減少路由交換引起的呼叫,通常用靜態路由.而當一對多情況下,<br>不在一個子網中用subinterface配置.</p><p>Configuration for Router:</p><p>interface serial 0<br>ip address 131.108.100.1 255.255.255.0<br>encapsulation x25<br>x25 address 041673226839<br>x25 htc 16<br>x25 map ip 131.108.100.2 041675222222<br>int s 0.1<br>ip address 131.108.101.1 255.255.255.0<br>x25 map ip 131.108.101.2 041674222222<br>!<br>ip route 131.108.100.0 255.255.255.0 131.108.100.2<br>ip route 131.108.101.0 255.255.255.0 131.108.101.2</p><p>路由協議設置<br>一、RIP協議<br>RIP(Routing information Protocol)是應用較早、使用較普遍的內部網關協議(Interior Gateway Protocol,簡稱IGP)，適用於小型同類網絡，是典型的距離向量(distance-vector)協議。文檔見RFC1058、RFC1723。<br>RIP通過廣播UDP報文來交換路由信息，每30秒發送一次路由信息更新。RIP提供跳躍計數(hop count)作為尺度來衡量路由距離，跳躍計數是一個包到達目標所必須經過的路由器的數目。如果到相同目標有二個不等速或不同帶寬的路由器，但跳躍計數相同，則RIP認為兩個路由是等距離的。RIP最多支持的跳數為15，即在源和目的網間所要經過的最多路由器的數目為15，跳數16表示不可達。<br>1. 有關命令<br>任務 命令<br>指定使用RIP協議 router rip<br>指定RIP版本 version {1|2}1<br>指定與該路由器相連的網絡 network network<br>注：1.Cisco的RIP版本2支持驗證、密鑰管理、路由匯總、無類域間路由(CIDR)和變長子網掩碼(VLSMs)<br>2. 舉例<br>Router1:</p><p>router rip<br>version 2<br>network 192.200.10.0<br>network 192.20.10.0<br>！<br>相關調試命令：<br>show ip protocol<br>show ip route</p><p>二、IGRP協議<br>IGRP (Interior Gateway Routing Protocol)是一種動態距離向量路由協議，它由Cisco公司八十年代中期設計。使用組合用戶配置尺度，包括延遲、帶寬、可靠性和負載。<br>缺省情況下，IGRP每90秒發送一次路由更新廣播，在3個更新週期內(即270秒)，沒有從路由中的第一個路由器接收到更新，則宣佈路由不可訪問。在7個更新週期即630秒後，Cisco IOS 軟件從路由表中清除路由。<br>1. 有關命令<br>任務 命令<br>指定使用RIP協議 router igrp autonomous-system1<br>指定與該路由器相連的網絡 network network<br>指定與該路由器相鄰的節點地址 neighbor ip-address<br>注：1、autonomous-system可以隨意建立，並非實際意義上的autonomous-system,但運行IGRP的路由器要想交換路由更新信息其autonomous-system需相同。<br>2．舉例</p><p>Router1:<br>router igrp 200<br>network 192.200.10.0<br>network 192.20.10.0<br>!</p><p>三、OSPF協議<br>OSPF(Open Shortest Path First)是一個內部網關協議(Interior Gateway Protocol,簡稱IGP)，用於在單一自治系統(autonomous system,AS)內決策路由。與RIP相對，OSPF是鏈路狀態路由協議，而RIP是距離向量路由協議。<br>鏈路是路由器接口的另一種說法，因此OSPF也稱為接口狀態路由協議。OSPF通過路由器之間通告網絡接口的狀態來建立鏈路狀態數據庫，生成最短路徑樹，每個OSPF路由器使用這些最短路徑構造路由表。<br>1．有關命令<br>全局設置<br>任務 命令<br>指定使用OSPF協議 router ospf process-id1<br>指定與該路由器相連的網絡 network address wildcard-mask area area-id2<br>指定與該路由器相鄰的節點地址 neighbor ip-address<br>注：1、OSPF路由進程process-id必須指定範圍在1-65535，多個OSPF進程可以在同一個路由器上配置，但最好不這樣做。多個OSPF進程需要多個OSPF數據庫的副本，必須運行多個最短路徑算法的副本。process-id只在路由器內部起作用，不同路由器的process-id可以不同。<br>2、wildcard-mask 是子網掩碼的反碼, 網絡區域ID area-id在0-4294967295內的十進制數，也可以是帶有IP地址格式的x.x.x.x。當網絡區域ID為0或0.0.0.0時為主幹域。不同網絡區域的路由器通過主幹域學習路由信息。<br>2．基本配置舉例:<br>Router1:<br>interface ethernet 0<br>ip address 192.1.0.129 255.255.255.192<br>!<br>interface serial 0<br>ip address 192.200.10.5 255.255.255.252<br>!<br>router ospf 100<br>network 192.200.10.4 0.0.0.3 area 0<br>network 192.1.0.128 0.0.0.63 area 1<br>!<br>Router2:</p><p>interface ethernet 0<br>ip address 192.1.0.65 255.255.255.192<br>!<br>interface serial 0<br>ip address 192.200.10.6 255.255.255.252<br>!<br>router ospf 200<br>network 192.200.10.4 0.0.0.3 area 0<br>network 192.1.0.64 0.0.0.63 area 2<br>!<br>Router3:</p><p>interface ethernet 0<br>ip address 192.1.0.130 255.255.255.192<br>!<br>router ospf 300<br>network 192.1.0.128 0.0.0.63 area 1<br>!<br>Router4:</p><p>interface ethernet 0<br>ip address 192.1.0.66 255.255.255.192<br>!<br>router ospf 400<br>network 192.1.0.64 0.0.0.63 area 1<br>!<br>相關調試命令：<br>debug ip ospf events<br>debug ip ospf packet<br>show ip ospf<br>show ip ospf database<br>show ip ospf interface<br>show ip ospf neighbor<br>show ip route<br>3. 使用身份驗證<br>為了安全的原因，我們可以在相同OSPF區域的路由器上啟用身份驗證的功能，只有經過身份驗證的同一區域的路由器才能互相通告路由信息。<br>在默認情況下OSPF不使用區域驗證。通過兩種方法可啟用身份驗證功能，純文本身份驗證和消息摘要(md5)身份驗證。純文本身份驗證傳送的身份驗證口令為純文本，它會被網絡探測器確定，所以不安全，不建議使用。而消息摘要(md5)身份驗證在傳輸身份驗證口令前，要對口令進行加密，所以一般建議使用此種方法進行身份驗證。<br>使用身份驗證時，區域內所有的路由器接口必須使用相同的身份驗證方法。為起用身份驗證，必須在路由器接口配置模式下，為區域的每個路由器接口配置口令。<br>任務 命令<br>指定身份驗證 area area-id authentication [message-digest]<br>使用純文本身份驗證 ip ospf authentication-key password<br>使用消息摘要(md5)身份驗證 ip ospf message-digest-key keyid md5 key<br>以下列舉兩種驗證設置的示例，示例的網絡分佈及地址分配環境與以上基本配置舉例相同，只是在Router1和Router2的區域0上使用了身份驗證的功能。:<br>1.使用純文本身份驗證<br>Router1:</p><p>interface ethernet 0<br>ip address 192.1.0.129 255.255.255.192<br>!<br>interface serial 0<br>ip address 192.200.10.5 255.255.255.252<br>ip ospf authentication-key cisco<br>!<br>router ospf 100<br>network 192.200.10.4 0.0.0.3 area 0<br>network 192.1.0.128 0.0.0.63 area 1<br>area 0 authentication<br>!<br>Router2:</p><p>interface ethernet 0<br>ip address 192.1.0.65 255.255.255.192<br>!<br>interface serial 0<br>ip address 192.200.10.6 255.255.255.252<br>ip ospf authentication-key cisco<br>!<br>router ospf 200<br>network 192.200.10.4 0.0.0.3 area 0<br>network 192.1.0.64 0.0.0.63 area 2<br>area 0 authentication<br>!<br>例2.消息摘要(md5)身份驗證：<br>Router1:</p><p>interface ethernet 0<br>ip address 192.1.0.129 255.255.255.192<br>!<br>interface serial 0<br>ip address 192.200.10.5 255.255.255.252<br>ip ospf message-digest-key 1 md5 cisco<br>!<br>router ospf 100<br>network 192.200.10.4 0.0.0.3 area 0<br>network 192.1.0.128 0.0.0.63 area 1<br>area 0 authentication message-digest<br>!<br>Router2:</p><p>interface ethernet 0<br>ip address 192.1.0.65 255.255.255.192<br>!<br>interface serial 0<br>ip address 192.200.10.6 255.255.255.252<br>ip ospf message-digest-key 1 md5 cisco<br>!<br>router ospf 200<br>network 192.200.10.4 0.0.0.3 area 0<br>network 192.1.0.64 0.0.0.63 area 2<br>area 0 authentication message-digest<br>!<br>相關調試命令：<br>debug ip ospf adj<br>debug ip ospf events</p><p>四、重新分配路由<br>在實際工作中，我們會遇到使用多個IP路由協議的網絡。為了使整個網絡正常地工作，必須在多個路由協議之間進行成功的路由再分配。<br>以下列舉了OSPF與RIP之間重新分配路由的設置範例：<br>Router1的Serial 0端口和Router2的Serial 0端口運行OSPF，在Router1的Ethernet 0端口運行RIP 2，Router3運行RIP2，Router2有指向Router4的192.168.2.0/24網的靜態路由，Router4使用默認靜態路由。需要在Router1和Router3之間重新分配OSPF和RIP路由，在Router2上重新分配靜態路由和直連的路由。<br>範例所涉及的命令<br>任務 命令<br>重新分配直連的路由 redistribute connected<br>重新分配靜態路由 redistribute static<br>重新分配ospf路由 redistribute ospf process-id metric metric-value<br>重新分配rip路由 redistribute rip metric metric-value<br>Router1:</p><p>interface ethernet 0<br>ip address 192.168.1.1 255.255.255.0<br>!<br>interface serial 0<br>ip address 192.200.10.5 255.255.255.252<br>!<br>router ospf 100<br>redistribute rip metric 10<br>network 192.200.10.4 0.0.0.3 area 0<br>!<br>router rip<br>version 2<br>redistribute ospf 100 metric 1<br>network 192.168.1.0<br>!<br>Router2:</p><p>interface loopback 1<br>ip address 192.168.3.2 255.255.255.0<br>!<br>interface ethernet 0<br>ip address 192.168.0.2 255.255.255.0<br>!<br>interface serial 0<br>ip address 192.200.10.6 255.255.255.252<br>!<br>router ospf 200<br>redistribute connected subnet<br>redistribute static subnet<br>network 192.200.10.4 0.0.0.3 area 0<br>!<br>ip route 192.168.2.0 255.255.255.0 192.168.0.1<br>！<br>Router3:</p><p>interface ethernet 0<br>ip address 192.168.1.2 255.255.255.0<br>!<br>router rip<br>version 2<br>network 192.168.1.0<br>!<br>Router4:</p><p>interface ethernet 0<br>ip address 192.168.0.1 255.255.255.0<br>!<br>interface ethernet 1<br>ip address 192.168.2.1 255.255.255.0<br>!<br>ip route 0.0.0.0 0.0.0.0 192.168.0.2<br>!</p><p>五、IPX協議設置<br>IPX協議與IP協議是兩種不同的網絡層協議，它們的路由協議也不一樣，IPX的路由協議不象IP的路由協議那樣豐富，所以設置起來比較簡單。但IPX協議在以太網上運行時必須指定封裝形式。<br>1． 有關命令<br>啟動IPX路由 ipx routing<br>設置IPX網絡及以太網封裝形式 ipx network network [encapsulation encapsulation-type]1<br>指定路由協議，默認為RIP ipx router {eigrp autonomous-system-number | nlsp [tag] | rip}<br>注：1.network 範圍是1 到FFFFFFFD.<br>IPX封裝類型列表<br>接口類型 封裝類型 IPX幀類型<br>Ethernet novell-ether (默認) arpa sap snap Ethernet_802.3 Ethernet_II Ethernet_802.2 Ethernet_Snap<br>Token Ring sap (默認) snap Token-Ring Token-Ring_Snap<br>FDDI snap (默認) sap novell-fddi Fddi_Snap Fddi_802.2 Fddi_Raw<br>在此例中，WAN的IPX網絡為3a00,Router1所連接的局域網IPX網絡號為2a00,在此局域網有一台Novell服務器，IPX網絡號也是2a00, 路由器接口的IPX網絡號必須與在同一網絡的Novell服務器上設置的IPX網絡號相同。路由器通過監聽SAP來建立已知的服務及自己的網絡地址表，並每60秒發送一次自己的SAP表。<br>Router1:</p><p>ipx routing<br>interface ethernet 0<br>ipx network 2a00 encapsulation sap<br>!<br>interface serial 0<br>ipx network 3a00<br>!<br>ipx router eigrp 10<br>network 3a00<br>network 2a00<br>!<br>Router2:</p><p>ipx routing<br>interface ethernet 0<br>ipx network 2b00 encapsulation sap<br>!<br>interface serial 0<br>ipx network 3a00<br>!<br>ipx router eigrp 10<br>network 2b00<br>network 3a00<br>!<br>相關調試命令：<br>debug ipx packet<br>debug ipx routing<br>debug ipx sap<br>debug ipx spoof<br>debug ipx spx<br>show ipx eigrp interfaces<br>show ipx eigrp neighbors<br>show ipx eigrp topology<br>show ipx interface<br>show ipx route<br>show ipx servers<br>show ipx spx-spoof<br>關鍵字:子網掩碼 靜態路由 動態路由 ssl ospf</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://seth.dpdns.org/posts/%E8%B8%8F%E8%B8%8F%E5%AF%A6%E5%AF%A6%E5%B9%B2%E6%B4%BB%E8%AA%8D%E8%AA%8D%E7%9C%9F%E7%9C%9F%E5%81%9A%E4%BA%8B/><span class=title>«</span><br><span>踏踏實實干活認認真真做事</span>
</a><a class=next href=https://seth.dpdns.org/posts/%E7%A3%81%E7%9B%98%E9%98%B5%E5%88%97disk-array/><span class=title>»</span><br><span>磁盘阵列(Disk Array)</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share cisco路由器的基本配置  on x" href="https://x.com/intent/tweet/?text=cisco%e8%b7%af%e7%94%b1%e5%99%a8%e7%9a%84%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%20&amp;url=https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share cisco路由器的基本配置  on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f&amp;title=cisco%e8%b7%af%e7%94%b1%e5%99%a8%e7%9a%84%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%20&amp;summary=cisco%e8%b7%af%e7%94%b1%e5%99%a8%e7%9a%84%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%20&amp;source=https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share cisco路由器的基本配置  on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f&title=cisco%e8%b7%af%e7%94%b1%e5%99%a8%e7%9a%84%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%20"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share cisco路由器的基本配置  on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share cisco路由器的基本配置  on whatsapp" href="https://api.whatsapp.com/send?text=cisco%e8%b7%af%e7%94%b1%e5%99%a8%e7%9a%84%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%20%20-%20https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share cisco路由器的基本配置  on telegram" href="https://telegram.me/share/url?text=cisco%e8%b7%af%e7%94%b1%e5%99%a8%e7%9a%84%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%20&amp;url=https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share cisco路由器的基本配置  on ycombinator" href="https://news.ycombinator.com/submitlink?t=cisco%e8%b7%af%e7%94%b1%e5%99%a8%e7%9a%84%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae%20&u=https%3a%2f%2fseth.dpdns.org%2fposts%2fcisco%25E8%25B7%25AF%25E7%2594%25B1%25E5%2599%25A8%25E7%259A%2584%25E5%259F%25BA%25E6%259C%25AC%25E9%2585%258D%25E7%25BD%25AE%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://seth.dpdns.org/>Seth Dang'S</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>