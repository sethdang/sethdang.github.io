<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | Seth Dang'S</title><meta name=keywords content><meta name=description content="Posts - Seth Dang'S"><meta name=author content="Seth"><link rel=canonical href=https://seth.dpdns.org/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.e1f5c4cae44599655f7ff95195ff89c8cb3adbda94f2b1581a434ab2b4d4e6cf.css integrity="sha256-4fXEyuRFmWVff/lRlf+JyMs629qU8rFYGkNKsrTU5s8=" rel="preload stylesheet" as=style><link rel=icon href=https://seth.dpdns.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://seth.dpdns.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://seth.dpdns.org/favicon-32x32.png><link rel=apple-touch-icon href=https://seth.dpdns.org/apple-touch-icon.png><link rel=mask-icon href=https://seth.dpdns.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://seth.dpdns.org/posts/index.xml><link rel=alternate hreflang=en href=https://seth.dpdns.org/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="https://seth.dpdns.org/posts/"><meta property="og:site_name" content="Seth Dang'S"><meta property="og:title" content="Posts"><meta property="og:description" content="技术博客与知识分享"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="技术博客与知识分享"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://seth.dpdns.org/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://seth.dpdns.org/ accesskey=h title="Seth Dang'S (Alt + H)">Seth Dang'S</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>2004-12-29</h2></header><div class=entry-content><p>2004-12-29 小雨 星期三
一早收好东西回家了，重庆的交通工具真够烂的，车到大石坝，有人在诈马路。转来转去到11：30左右才到红旗河沟。走了回沙滨路，以前可还没走过。
一路下着小雨，咋选了个雨天出行哟。还好，自己没有淋着一点雨，带的电脑和衣物也没有。觉得重庆真的没有什么好留恋的了，一路上虽然搬了很多东西，可心里还是蛮轻松的。人还是得靠自己，谁也不会全力帮你。那一干事我就记在心底了，写下来没啥意思。
一路上心很平静，在重庆-》邻水的车上温习了一遍搞笑大师周星驰的《情圣》，觉得真的不愧为大师。看过N篇还是有新鲜感。邻水-》普新路上唱着些老歌，呵呵虽说搬的东西挺累人，不过也没有什么了。</p></div><footer class=entry-footer><span title='2008-08-10 07:59:11 +0800 +0800'>August 10, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 2004-12-29" href=https://seth.dpdns.org/posts/2004-12-29/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>2004-12-28</h2></header><div class=entry-content><p>2004-12-28 阴 星期二
早上一早就开始收东西了，把要走的消息给大家说了，还想晚上一起聚个餐。
上午上了会儿网，整理了下昨天发的简历，然后去银行后巧遇她们三人，才决定晚上去吃串串。时间还早她们又要上自习，我就先回家收东西了。
晚上的串串味还不错，不过没有什么心情吃得，可能忧伤的人只有我而已，何必呢！
打牌的时候手气不错，第一盘给她们一个大光，第二盘一个小光升到五。这就叫“情场失意，赌场得意”吧。
记一篇流水帐，什么心情也写不下来反正挺郁闷的。</p></div><footer class=entry-footer><span title='2008-08-10 00:17:13 +0800 +0800'>August 10, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 2004-12-28" href=https://seth.dpdns.org/posts/2004-12-28/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>奥运开幕</h2></header><div class=entry-content><p>期待已久的奥运开幕了，开幕式搞得不错。
尽管昨天很霉，股市跌了割肉了，心情也不畅快，不过还是要为奥运加油，为中国加油。
中国人也算是扬眉吐气了一回！</p></div><footer class=entry-footer><span title='2008-08-09 13:40:10 +0800 +0800'>August 9, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 奥运开幕" href=https://seth.dpdns.org/posts/%E5%A5%A5%E8%BF%90%E5%BC%80%E5%B9%95/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>DOS/WinPE双启动移动硬盘制作详解（转帖）</h2></header><div class=entry-content><p>DOS/WinPE双启动移动硬盘制作详解
2008-04-23 10:46
[ 2007-5-5 5:03:00 | By: icbchnzf ]
很多年以前，那时候软驱还是电脑的必配，维护电脑引导系统也用软盘，我那时候就做了N片启动软盘。后来随着软盘淡出市场，系统维护盘也改用光盘了，例如著名的深山红叶系统维护工具盘，就为我的工作提供了有力的帮助。不过光盘还是存在容易磨花，体积较大等缺点。现在的电脑基本上都支持USB设备启动，U盘可以做成小巧而容易携带的系统维护盘；可重写的存储媒体也为更新提供了方便，再也不用为了升级刻录一堆光盘了。目标：对于系统维护来说，WindowsPE不可却少的利器；除此外，有一些问题还是需要启动到DOS环境来解决。所以我的目标就是制作一个DOS/WinPE双启动的系统维护U盘。下次再遇到某电脑系统崩溃的话，从衣袋里面摸出一精致的U盘，启动电脑之后，把问题解决于弹指间。何其潇洒也！技术背景：其实，U盘启动电脑，主要是各种引导工具的合理灵活运用，所有的操作和调试，也都是围绕引导工具的安装和配置进行的。我们知道，作为操作系统的主要载体，磁盘一直是最重要的存储媒质。因此基本上所有的OS引导的模式都大致相同，都是由磁盘来装入的。首先，需要在OS所在磁盘的MBR（主引导记录）扇区写入特定的引导代码，电脑启动后会按照BIOS里面设置的启动顺序轮询对应磁盘的MBR区，如果找到有效的MBR记录，就按照MBR记录的指针去装入OS引导文件，如果OS引导文件正常，就加载对应的操作系统。因此完成一个操作系统的启动，需要两个必须的步骤：1、MBR引导；2、OS引导。基于上述基本原理，各种操作系统都有自带的引导器，例如WindowsNT以上系统的NT Loader（NTLDR）、Linux的Lilo、各版本的Grub引导器等等，当然还有一些第三方的多系统引导工具如System Commander等等。对于我们目前的这个应用，目的是能够在U盘上实现DOS/WinPE双启动，并且具有相对比较好的兼容性。要达到这个目的，就有一些技术要求。首先，方案要能够适应U盘移动存储这种盘符变动的情况；其次，要实现双启动，一般都会用到虚拟盘镜像，也就是引导器需要支持RAMDisk加载各种常见磁盘镜像启动的方式。虽然U盘具有小巧轻量并且可以反复擦写等诸多优点，但如果要做成启动盘，还存在一些需要解决的问题。最大的问题是：USB启动并没有统一的行业规范。主板制造商不同、BIOS不同，USB引导方式也有差异。作为移动存储设备，主板对U盘的识别不同，会使盘符变化。这些直接导致U盘启动的通用性和兼容性不理想，表现就是在有些电脑上无法引导。这是需要重点解决的问题。OS选择：DOS系统选用MS-DOS 7.1；WinPE选用无忧论坛老毛桃的“外置网络、多媒体组件的老九 WinPE 老毛桃最终修改版”
NT Loader + AVLDR + Avlgo
MBR用NT Loader引导，在NTLDR引导菜单中设置选项：用AVLDR引导WinPE；而用Avlgo引导DOS；由于Avlgo不支持选单方式多重启动，为了解决不同主板识别U盘的盘符不同的问题，对Avlgo引导配置文件稍作修改，以适应盘符变化的启动需求。
工具准备：
PeToUsb——用来把U盘格式化成NT引导模式；WinImage——用于制作DOS启动软盘镜像；Avlgomgr——用于生成Avlgo引导文件；UltraEdit——用于编辑修改Avlgo的引导文件。
数据准备：
1、PeToUSB是一款免费软件，专门用来把U盘引导区格式化成NTLDR引导代码。启动PeToUSB，从“Destination Driver”栏选择目标U盘，点击下面的“Start”按钮，它询问“Continue”是否继续，点击“是”，弹出一个警告窗口，提示目标盘的所有数据都将会丢失，是否继续？还是选择“是”，然后片刻就完成格式化。
2、用WinImage制作一个2.88M的启动软盘镜像，将MS-DOS 7.1装入镜像，并把常用的DOS工具也放到镜像里面。启动WinImage后，点击最左边的按钮新建一个镜像，这里选择标准格式2.88MB，为的是尽量能多存放一些工具。然后向这个镜像中添加文件，把事先准备好的MS-DOS系统文件从资源管理器里面拖拽到WinImage窗口中。其它DOS工具也这样添加进来。文件添加完毕之后，点击“映像”菜单——“引导扇区属性”，选择“Windows 95/98”并确定，这一步很重要，漏做这一步的话，这个软盘镜像就不能引导电脑了。最后保存成ima格式的镜像文件DOS.ima。
3、、先备份好C盘的Boot.ini文件，注意默认状态看不到这个系统、隐藏属性的文件，需要到资源管理器里面“工具”菜单“文件夹选项”当中修改查看方式，取消“隐藏受保护的操作系统文件”复选框，并切换为显示所有文件。启动Avlgomgr，在“虚拟磁盘完整路径”浏览找到刚才用WinImage制作的镜像文件，然后点击“装配”按钮，Avlgomgr自动修改Boot.ini文件，并在目标盘（本例为C盘）生成我们需要的Avldr.bin和Avlgo.sys两个关键文件，把这两个文件拷贝到某处备用。完成以后恢复原C盘的Boot.ini文件。
4、启动UltraEdit，先打开Avldr.bin，在编辑屏右边的ASCⅡ码区域可以找到“AVLGO.SYS”的字符串，把它改成“AVDOS.SYS”，文件另存为Avldr.dos。
5、然后打开Avlgo.sys，在右边ASCⅡ码区域找“(hd0,0)/DOS.IMA”字符串，把它修改成“(fd0)/DOS.IMA”。修改的时候要注意，由于修改后的字符串比修改前的短，为保证文件长度不变，剩下的部分要切换到左边16进制码区域，用“00”填充，这样才能保证文件长度不变。修改完后另存为Avdos.sys。
开始组装：
1、首先，在U盘的根目录用记事本创建一个Boot.ini文件，内容如下：
[boot loader]
timeout=30
default=C:\avldr.xpe
[operating systems]
C:\avldr.xpe=“Windows PE”
C:\avldr.bin=“MS-DOS 7.1 form USB-HDD”
C:\avldr.dos=“MS-DOS 7.1 from USB-FDD”
完成以后把这个文件的属性修改成 只读/系统/隐藏（可以用DOS命令 attrib +r +s +h boot.ini 修改文件属性）。
这是NT Loader的菜单配置文件，timeout参数设置的是说サ却 奔洌 绻 谏瓒ǖ氖奔洌ū纠 ?0秒）用户没有进行选择，就自动加载default项默认的C:\avldr.xpe，启动WinPE。
[operating systems]小节是菜单中出现的引导选项，第一个就是前面default设置的老毛桃WinPE，双引号里面的是注释行，会显示在引导菜单里面。下面两行分别是为主板识别U盘为USB-HDD和主板识别U盘为USB-FDD两种模式对应的引导项。
2、把硬盘系统的NTLDR和NTDETECT.COM两个文件拷贝到U盘根目录，这是NT Loader引导器的必须文件。
...</p></div><footer class=entry-footer><span title='2008-08-07 14:42:47 +0800 +0800'>August 7, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to DOS/WinPE双启动移动硬盘制作详解（转帖）" href=https://seth.dpdns.org/posts/doswinpe%E5%8F%8C%E5%90%AF%E5%8A%A8%E7%A7%BB%E5%8A%A8%E7%A1%AC%E7%9B%98%E5%88%B6%E4%BD%9C%E8%AF%A6%E8%A7%A3%E8%BD%AC%E5%B8%96/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>2004-12-27</h2></header><div class=entry-content><p>2004-12-27 小雨 星期一
天好冷，肯定其它地方下了雪，郁闷的是去查了下线路，居然没有重庆到东莞的直通车。咋办呢？明年就不回来了，去达川赶车。
上午上网中，下午就回家收了东西，把魏瑜娜送我的杯子装进了行李箱，没想到益键居然想盘根究底。是不是脑壳有问题哟，转快点赛！没事做挺无聊的，上午在jobcn.com上发的简历，真希望能助我明年一举成功。
还好!这几天(自从圣诞以后）心事就蛮少的，除了为钱的事有些耿耿于怀，剩下的就是一门心事的想出去。毕竟是自己决定的，自己前途所在嘛。离别的忧伤还是蛮多的，不过我不晓得大家怎么看我，只知道继续以前的生活是会被大家所遗弃的。而现在，他们会不会认为我是在遗弃她们呢？说不上，看见大家不说话，我很郁闷，看见大家又说又笑，我觉得很心寒。自己是不是有什么心理问题哟。
真想从明年开始就和大家玩一次人间蒸发，可是似乎不是我的性格。目前的打算是留几个我的联系方式，如果大家都把我忘了，我也没有必要联系哪个哟。不过我想我会禁不住和他们联系的，只不过一定要尽量克制一下，不想再为了那些无足轻重的感情而放弃自己的美好前景。
等她们回来我会告诉她们我要在后天回家，或许就不来重庆了，东西嘛，能搬的自己搬，搬不了的让姐帮忙哟!</p></div><footer class=entry-footer><span title='2008-08-02 10:28:27 +0800 +0800'>August 2, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 2004-12-27" href=https://seth.dpdns.org/posts/2004-12-27/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>2004-12-26</h2></header><div class=entry-content><p>2004-12-26 阴有小雨 星期天
买了一个不怎么样的笔记本，有什么办法呢，m不怎么够吧。
m是我明年的目标，没想到出门还要回家要m，觉得自己确实不怎么样,咋混成这样了呢？
小灵通给了益键自己连个时间都没有，回家又得把还给爸爸的手机要回来了。没钱装是什么酷。什么东西都拱手让人，人家又不见得记得你的好，记好又咋样，以后面都难得见。真该300块钱把小灵通卖给周先生，多交个朋友又得了钱、＋xx＋xx嘿，明年的路费就有了。
想想而，谁叫自己是一个这么善良的人，相信总有那么几个真心的朋友记得我的好。不过以后自己要改改了。要不什么损失都让家人承担了，我还怎么混。
现在身无分文了，真想去跳楼，银行卡上那仅有的几百块钱怎么混得到年关哟？回家去吧，回到家就衣食无忧，明年再找爸爸要个两千块钱出门，混得好的话一年挣个一、二万应该没问题。也该为自己前途做些打算了。“钱途”则是一切的开始，原始资本积累够了先。
“钱是万恶之源”而今眼目下，看来自己得好好想想，处理好这个问题。拓展出一条生财之道才是。要不然被这可恶的东西驱使了，不知道要出好多状况，“君子爱财取之有道”哟！</p></div><footer class=entry-footer><span title='2008-07-31 13:30:54 +0800 +0800'>July 31, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 2004-12-26" href=https://seth.dpdns.org/posts/2004-12-26/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>2004-12-24</h2></header><div class=entry-content><p>2004-12-25 阴 星期五
新的一天，倒没有觉得有什么新的开始，倒是一早又停了会儿电，让人觉得郁闷。又一个圣诞节临近了，家里这么多人。魏、张译予、廖婵、邓益键。可我还是觉得很孤独，这么多人还有这样的感觉，我还不如一个人孤独算了，反正也孤独惯了。去了东莞，还有一个相当好的朋友徐波陪我，一切会更好！坚定信念，晚上打电话问候一下徐，顺便谈谈过去的事。
昨晚梦见w了，还和金峰宇那个贱人掺和，自己在一旁吃醋。为什么会这样呢，醒来才知道是个梦，心里却也感到阵痛。想回到梦中，去痛扁他们一顿出出气，可无论如何也睡不着了。写到这里，天还早。原来刚才的电是大厦发的，又停了。还是晚些做个总结吧！
上午去了我曾经去过很难忘的地方，观音岩，建院，瓷器口，嘉陵江畔，要离开了找点回忆。一天就这么快过完了，洗个澡衣服又堆了一大堆。洗完衣服已经是六七点，吃了点面，却还没一个人回来陪我。今年的圣诞前夜注定孤独度过了，也还算过得一般，似乎比我前两个圣诞过得好，或许是关了手机的原因吧。
朋友们，对不起了，只能我给你们打电话了，我不想接到任何一个不想接到的电话。
圣诞快乐！
2004-12-26抄</p></div><footer class=entry-footer><span title='2008-07-30 18:27:56 +0800 +0800'>July 30, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 2004-12-24" href=https://seth.dpdns.org/posts/2004-12-24/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>2004-12-23</h2></header><div class=entry-content><p>2004-12-23 阴 星期四
呆在家中，停电了很久,想到很久没写日记了，也没去买个好的日记本，在个破本上就开始了。
最近很多事想记下来，更想忘记，矛盾！
决定离开重庆，又觉得舍不得（比我离开成都还舍不得），临到真的打算离开又犹豫什么呢？自己变得优柔了吗！最近老在自我否定，怀疑自己是不是定错了目标？是！怀疑自己是不是入错了行？是！怀疑自己是不是选错了地方？是！自己还是以前的自己？不是！同样的问题问过自己n遍之后才发现自己已经变了，尽管还有一摩尔的物质是不变的。
不断的否定中，我丧失了自信、以及很多优良的品质。我不再那么天真无邪，不再有什么信仰，不再有什么追求（或许不久也会有）。还是坚信一句话“时间时疗伤的良药”时间能帮我解决很多问题，我能依靠的也仅仅是时间了。
重庆真的留下了我很多思绪，快乐，有最快乐的时光，痛苦，甚比撕心裂肺；事业、成就也都是昙花一现。凡是给我带来过这么多回忆的城市我是没有理由恨她的，尽管我并不喜欢重庆，但我一辈子也忘不掉了。她呢？我这个人不是很爱憎分明，本来想真真正正的爱一次&恨一次！结果爱过了，恨过了。
留下的只是回忆和淡淡的痛。也无所谓了。
16：19电还在继续停，光线不怎么好了。OVER！
2004-12-26抄</p></div><footer class=entry-footer><span title='2008-07-30 15:37:58 +0800 +0800'>July 30, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 2004-12-23" href=https://seth.dpdns.org/posts/2004-12-23/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>赌局</h2></header><div class=entry-content><p>最近股市惨淡，我却神奇的一连卖了两次当日最高价，算是我这辈子少有的奇遇了。又套进去了不少，也在一来一去中享受这现实的折磨同煎熬。说来我这个人倒是真没有睹运，从小到大很少赢过什么赌局，不过赌性倒是哪个人都有，我也算控制得很好的,赌博的事我很少参与。
在人生很郁闷的时候我选择了炒股，希望一点点的刺激能还给我对生活的激情,可是世事不如意十之八九，我站在5320点的高位买入第一支沪市的股票，然后等待我的是股市一路暴跌。如今上证指数站到了2770，多次倒手我从一个菜鸟变得成熟，股市的风云变幻让我更清醒的认识到现实的残酷。跌得很惨烈，我也学会了认赔出局的勇气。
人生呢？我仿佛是一个不会认赔出局的赌徒。被自己套在一支票上，全仓买入.后来还发现亏损了，ST了，破产清算了。我的一切还能拿得回来吗？</p></div><footer class=entry-footer><span title='2008-07-19 09:28:53 +0800 +0800'>July 19, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 赌局" href=https://seth.dpdns.org/posts/%E8%B5%8C%E5%B1%80/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>系统禁用U盘策略（转）</h2></header><div class=entry-content><p>如果计算机上尚未安装 USB 存储设备
如果计算机上尚未安装 USB 存储设备，请向用户或组分配对下列文件的“拒绝”权限：
%SystemRoot%\Inf\Usbstor.pnf
%SystemRoot%\Inf\Usbstor.inf
这样，用户将无法在计算机上安装 USB 存储设备。 要向用户或组分配对 Usbstor.pnf 和 Usbstor.inf 文件的“拒绝”权限，请按照下列步骤操作：
启动 Windows 资源管理器，然后找到 %SystemRoot%\Inf 文件夹。
右键单击“Usbstor.pnf”文件，然后单击“属性”。
单击“安全”选项卡。
在“组或用户名称”列表中，单击要为其设置“拒绝”权限的用户或组。
在“用户名或组名 的权限”列表中，单击以选中“完全控制”旁边的“拒绝”复选框，然后单击“确定”。
右键单击“Usbstor.inf”文件，然后单击“属性”。
单击“安全”选项卡。
在“组或用户名称”列表中，单击要为其设置“拒绝”权限的用户或组。
在“用户名或组名 的权限”列表中，单击以选中“完全控制”旁边的“拒绝”复选框，然后单击“确定”。
如果计算机上已经安装了 USB 存储设备
警告： “注册表编辑器”使用不当可导致严重问题，可能需要重新安装操作系统。Microsoft 不能保证您可以解决因“注册表编辑器”使用不当而导致的问题。使用注册表编辑器需要您自担风险。 如果计算机上已经安装了 USB 存储设备，请将以下注册表项中的“Start”值设置为 4：
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\UsbStor
这样，当用户将 USB 存储设备连接到计算机时，该设备将无法运行。要设置“Start”的值，请按照下列步骤操作：
单击“开始”，然后单击“运行”。
在“打开”框中，键入“regedit”，然后单击“确定”。
找到并单击下面的注册表项：
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\UsbStor
在右窗格中，双击“Start”。
在“数值数据”框中，键入 4，单击“十六进制”（如果尚未选中），然后单击“确定”。
退出“注册表编辑器”。
至此，USB禁止策略实施成功。
屏蔽U盘
1、在域控制器上打开Active Directory用户和计算机，找到您要屏蔽U盘的组织单位（Organizational Unit 简称OU），右键查看此组织单位的属性，点击组策略页面，新建一个组策略，命名并保存为“屏蔽U盘”，建好后，双击“屏蔽U盘”（必需先打开一次，否则系统不会拷贝那几个模板文件），在打开的标题为“组策略”的窗口的左边，按以下顺序定位“用户配置－管理模板-Windows组件-Windows资源管理器”，选中Windows资源管理器
我们可以看到有“隐藏我的电脑中的这些指定的驱动器”和“防止从我的电脑访问驱动器”，双击打开其中一项策略，选择“启用”，下面的下拉框会变亮，单击下拉框，如图2所示，您会发现系统提供了7种限制访问驱动器号的组合，其中也包括了“不限制驱动器”，显然，这些组合不能满足我们的要求（因为U盘的盘符通常是排在最后的，而且现在的硬盘比较大，少则也有三四个分区）。
2、在域控制器上打开Active Directory 用户和计算机，在刚才我们新建的“屏蔽U盘”策略上单击右键选择查看属性，在如图3所示的位置找到"屏蔽U盘"的组策略的唯一的名称，此名称为一长串数字和字母组成，本例中为{82F86A8E-B345-4DDC-A304-E448F6E900A9}，记下此字符串。
3、打开系统盘，定位以{82F86A8E-B345-4DDC-A304-E448F6E900A9}命名的文件夹，此文件夹位于“C:WINNTSYSVOLbaling.com.cnPolicies”下（盘符依赖于您安装的操作系统所在的分区），注意其中baling.com.cn是您的Windows 2000的域名，打开{82F86A8E-B345-4DDC-A304-E448F6E900A9}目录，找到ADM目录下的system.adm文件，此文件是我们在实施组策略的模板文件，是一个纯文本文件，可用记事本打开，找到下面这两段代码：
POLICY !!NoDrives
EXPLAIN !!NoDrives_Help
PART !!NoDrivesDropdown DROPDOWNLIST NOSORT REQUIRED
VALUENAME “NoDrives”
ITEMLIST
NAME !!ABOnly VALUE NUMERIC 3
NAME !!COnly VALUE NUMERIC 4
NAME !!DOnly VALUE NUMERIC 8
NAME !!ABConly VALUE NUMERIC 7
NAME !!ABCDOnly VALUE NUMERIC 15
NAME !!ALLDrives VALUE NUMERIC 67108863 DEFAULT
; low 26 bits on (1 bit per drive)
NAME !!RestNoDrives VALUE NUMERIC 0
END ITEMLIST
END PART
END POLICY POLICY !!NoViewOnDrive
EXPLAIN !!NoViewOnDrive_Help
PART !!NoDrivesDropdown DROPDOWNLIST NOSORT REQUIRED
VALUENAME “NoViewOnDrive”
ITEMLIST
NAME !!ABOnly VALUE NUMERIC 3
NAME !!COnly VALUE NUMERIC 4
NAME !!DOnly VALUE NUMERIC 8
NAME !!ABConly VALUE NUMERIC 7
NAME !!ABCDOnly VALUE NUMERIC 15
NAME !!ALLDrives VALUE NUMERIC 67108863 DEFAULT （C/D ONLY=67108851）
; low 26 bits on (1 bit per drive)
NAME !!RestNoDrives VALUE NUMERIC 0
END ITEMLIST
END PART
END POLICY 说明：这是两个策略，第一个!!NoDrive，它的作用是在我的电脑中不显示指定的驱动器名，驱动器号代表的所有驱动器不出现在标准的打开对话框上，但是在地址栏中输入盘符或新建一个指向硬盘盘符的快捷方式，用户仍然可以访问该驱动器；第二个!!NoViewOnDrive的作用是阻止用户访问驱动器。可以阻止上述情况的出现，但是仅仅用第二个的话，用户可以看见该驱动器的盘符，但不能访问，一般情况，两个同时使用，可以达到比较理想的效果。
...</p></div><footer class=entry-footer><span title='2008-07-11 13:56:20 +0800 +0800'>July 11, 2008</span>&nbsp;·&nbsp;Seth</footer><a class=entry-link aria-label="post link to 系统禁用U盘策略（转）" href=https://seth.dpdns.org/posts/%E7%B3%BB%E7%BB%9F%E7%A6%81%E7%94%A8u%E7%9B%98%E7%AD%96%E7%95%A5%E8%BD%AC/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://seth.dpdns.org/posts/page/8/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://seth.dpdns.org/posts/page/10/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://seth.dpdns.org/>Seth Dang'S</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>