<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>重命名AD网域的方式 | Seth Dang'S</title><meta name=keywords content><meta name=description content="网域
提升域和林的功能级别
只能重命名其中所有的域控制器都在运行 Windows Server 2003 并且林功能级别已被提升到 Windows Server 2003 的林中的域。
提升域功能级别
按下列步骤提升域功能级别：
1、打开【Active Directory 用户和计算机】。在控制台树中，右键单击【Active Directory 用户和计算机】节点，然后单击【提升域的功能级别】。
2、在【选择可用的域功能级别】中单击“Windows Server 2003”，然后单击【提升】。
提升林功能级别
按下列步骤提升林功能级别：
1、打开【Active Directory 域和信任关系】。在控制台树中，右键单击【Active Directory 域和信任关系】节点，然后单击【提升林的功能级别】。
2、在【选择可用的林功能级别】中单击“Windows Server 2003”，然后单击【提升】。
实现域名更改
现在我们以将域名esstest.com更改为sky.com为例进行讲解。更改域名需按以下步骤进行：
1、在DNS中建立新域名的活动目录集成区域-SKY.COM
2、将Windows Server 2003的安装光盘插入光驱，将“\VALUEADD\MSFT\MGMT”下的DOMREN目录复制到系统的C盘根目录下。
3、在打开的“命令提示符”窗口中的命令行下使用CD命令进入DOMREN目录后，输入“Rendom /list”命令为当前林生成描述信息（将会使用XML编码结构将信息写入到一个输出文件中，默认文件名为domainlist.xml）。该文件包含了一些列表，列出了林中的所有域和应用程序目录分区，以及它们相应的DNS和NetBIOS名（应用程序目录分区没有NetBIOS名）
4、因为“Rendom /list”命令生成的当前林的描述文件是一个文本文件，所以现在可以使用系统中的“记事本”功能对它进行编辑。按下“Ctrl+H”键，在弹出的“替换”对话框中将所有的“esstest.com”替换成新域的名称“sky.cn”，并将NetBIOS的名称也进行相应的更换后，将该文件存盘。
5、接着返回到命令符提示窗口，在命令行中输入“Rendom /upload”命令。这条命令在运行后，域的命名主控会做出一些修改，以便为重命名操作的实际执行做好准备。
提示： upload命令执行的操作和目录因此而发生的变化都是为将来的重命名操作做准备。在本步骤中不对域名进行任何的修改。
6、接着再依次输入“Rendom /prepare”命令和“Rendom /execute”命令。
“Rendom /prepare”命令主要是用于校验连到该域的所有DC是否准备就绪，如果看到有“Successfully”信息，那么则表示连接各DC成功。此外，本测试还对每台DC进行授权情况检查，以确定运行rendom /prepare命令的用户是否得到了授权执行重命名指令。如果用户没有得到“写”授权，命令将失败，并产生一个错误。
“Rendom /execute”命令用于发出正式更改域名的指令，如果看到有“Successfully”的信息，那么表示域的重命名过程成功完成了。
7、在上述命令执行完毕后，系统将会自动关闭重启。此外还必需对域中所有计算机执行两遍手工关机，第一次关机用于使新域成员资格生效；第二次关机则用于将计算机的DNS后缀自动转换为新域名称。
提示：如果DNS后缀没有自动更改，请右击“我的电脑”图标，在弹出的菜单中选择“属性”，切换到“计算机名”选项卡设置界面后，点击“更改”按钮并根据提示操作即可。
8、调整组策略：因为在完成域的重命名应用后，希望组策略中的相关设置能够继续得到应用。所以还需要在命令符提示窗口的命令行中输入如下命令：
gpfixup /olddns:esstest.com /newdns:sky.com /oldnb:SHYZHONG /newnbOVEBOOK /dc:sky.com
9、在执行上述命令后（中间域名部分请自行根据实际情况进行修改），如果看到“Start fixing non-site group policy links”信息，则表示上述命令已经得到了成功执行。
10、删除原域名：
这个操作只需使用“Rendom /clean”命令即可轻松完成从Active Directory中删除原域名的操作了。在成功运行了“Rendom /clean”命令后，新森林便准备就绪，可以进行下一次的森林结构调整工作。这一点只需从“Active Directory 域和信任关系”窗口就可以看出来了。"><meta name=author content="Seth"><link rel=canonical href=seth.dpdns.org/posts/%E9%87%8D%E5%91%BD%E5%90%8Dad%E7%BD%91%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/><link crossorigin=anonymous href=seth.dpdns.org/assets/css/stylesheet.e1f5c4cae44599655f7ff95195ff89c8cb3adbda94f2b1581a434ab2b4d4e6cf.css integrity="sha256-4fXEyuRFmWVff/lRlf+JyMs629qU8rFYGkNKsrTU5s8=" rel="preload stylesheet" as=style><link rel=icon href=seth.dpdns.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=seth.dpdns.org/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=seth.dpdns.org/favicon-32x32.png><link rel=apple-touch-icon href=seth.dpdns.org/apple-touch-icon.png><link rel=mask-icon href=seth.dpdns.org/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=seth.dpdns.org/posts/%E9%87%8D%E5%91%BD%E5%90%8Dad%E7%BD%91%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="seth.dpdns.org/posts/%E9%87%8D%E5%91%BD%E5%90%8Dad%E7%BD%91%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/"><meta property="og:site_name" content="Seth Dang'S"><meta property="og:title" content="重命名AD网域的方式"><meta property="og:description" content="网域
提升域和林的功能级别
只能重命名其中所有的域控制器都在运行 Windows Server 2003 并且林功能级别已被提升到 Windows Server 2003 的林中的域。
提升域功能级别
按下列步骤提升域功能级别：
1、打开【Active Directory 用户和计算机】。在控制台树中，右键单击【Active Directory 用户和计算机】节点，然后单击【提升域的功能级别】。
2、在【选择可用的域功能级别】中单击“Windows Server 2003”，然后单击【提升】。
提升林功能级别
按下列步骤提升林功能级别：
1、打开【Active Directory 域和信任关系】。在控制台树中，右键单击【Active Directory 域和信任关系】节点，然后单击【提升林的功能级别】。
2、在【选择可用的林功能级别】中单击“Windows Server 2003”，然后单击【提升】。
实现域名更改
现在我们以将域名esstest.com更改为sky.com为例进行讲解。更改域名需按以下步骤进行：
1、在DNS中建立新域名的活动目录集成区域-SKY.COM
2、将Windows Server 2003的安装光盘插入光驱，将“\VALUEADD\MSFT\MGMT”下的DOMREN目录复制到系统的C盘根目录下。
3、在打开的“命令提示符”窗口中的命令行下使用CD命令进入DOMREN目录后，输入“Rendom /list”命令为当前林生成描述信息（将会使用XML编码结构将信息写入到一个输出文件中，默认文件名为domainlist.xml）。该文件包含了一些列表，列出了林中的所有域和应用程序目录分区，以及它们相应的DNS和NetBIOS名（应用程序目录分区没有NetBIOS名）
4、因为“Rendom /list”命令生成的当前林的描述文件是一个文本文件，所以现在可以使用系统中的“记事本”功能对它进行编辑。按下“Ctrl+H”键，在弹出的“替换”对话框中将所有的“esstest.com”替换成新域的名称“sky.cn”，并将NetBIOS的名称也进行相应的更换后，将该文件存盘。
5、接着返回到命令符提示窗口，在命令行中输入“Rendom /upload”命令。这条命令在运行后，域的命名主控会做出一些修改，以便为重命名操作的实际执行做好准备。
提示： upload命令执行的操作和目录因此而发生的变化都是为将来的重命名操作做准备。在本步骤中不对域名进行任何的修改。
6、接着再依次输入“Rendom /prepare”命令和“Rendom /execute”命令。
“Rendom /prepare”命令主要是用于校验连到该域的所有DC是否准备就绪，如果看到有“Successfully”信息，那么则表示连接各DC成功。此外，本测试还对每台DC进行授权情况检查，以确定运行rendom /prepare命令的用户是否得到了授权执行重命名指令。如果用户没有得到“写”授权，命令将失败，并产生一个错误。
“Rendom /execute”命令用于发出正式更改域名的指令，如果看到有“Successfully”的信息，那么表示域的重命名过程成功完成了。
7、在上述命令执行完毕后，系统将会自动关闭重启。此外还必需对域中所有计算机执行两遍手工关机，第一次关机用于使新域成员资格生效；第二次关机则用于将计算机的DNS后缀自动转换为新域名称。
提示：如果DNS后缀没有自动更改，请右击“我的电脑”图标，在弹出的菜单中选择“属性”，切换到“计算机名”选项卡设置界面后，点击“更改”按钮并根据提示操作即可。
8、调整组策略：因为在完成域的重命名应用后，希望组策略中的相关设置能够继续得到应用。所以还需要在命令符提示窗口的命令行中输入如下命令：
gpfixup /olddns:esstest.com /newdns:sky.com /oldnb:SHYZHONG /newnbOVEBOOK /dc:sky.com
9、在执行上述命令后（中间域名部分请自行根据实际情况进行修改），如果看到“Start fixing non-site group policy links”信息，则表示上述命令已经得到了成功执行。
10、删除原域名：
这个操作只需使用“Rendom /clean”命令即可轻松完成从Active Directory中删除原域名的操作了。在成功运行了“Rendom /clean”命令后，新森林便准备就绪，可以进行下一次的森林结构调整工作。这一点只需从“Active Directory 域和信任关系”窗口就可以看出来了。"><meta property="og:locale" content="zh-CN"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2010-05-16T21:32:20+08:00"><meta property="article:modified_time" content="2010-05-16T21:32:20+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="重命名AD网域的方式"><meta name=twitter:description content="网域
提升域和林的功能级别
只能重命名其中所有的域控制器都在运行 Windows Server 2003 并且林功能级别已被提升到 Windows Server 2003 的林中的域。
提升域功能级别
按下列步骤提升域功能级别：
1、打开【Active Directory 用户和计算机】。在控制台树中，右键单击【Active Directory 用户和计算机】节点，然后单击【提升域的功能级别】。
2、在【选择可用的域功能级别】中单击“Windows Server 2003”，然后单击【提升】。
提升林功能级别
按下列步骤提升林功能级别：
1、打开【Active Directory 域和信任关系】。在控制台树中，右键单击【Active Directory 域和信任关系】节点，然后单击【提升林的功能级别】。
2、在【选择可用的林功能级别】中单击“Windows Server 2003”，然后单击【提升】。
实现域名更改
现在我们以将域名esstest.com更改为sky.com为例进行讲解。更改域名需按以下步骤进行：
1、在DNS中建立新域名的活动目录集成区域-SKY.COM
2、将Windows Server 2003的安装光盘插入光驱，将“\VALUEADD\MSFT\MGMT”下的DOMREN目录复制到系统的C盘根目录下。
3、在打开的“命令提示符”窗口中的命令行下使用CD命令进入DOMREN目录后，输入“Rendom /list”命令为当前林生成描述信息（将会使用XML编码结构将信息写入到一个输出文件中，默认文件名为domainlist.xml）。该文件包含了一些列表，列出了林中的所有域和应用程序目录分区，以及它们相应的DNS和NetBIOS名（应用程序目录分区没有NetBIOS名）
4、因为“Rendom /list”命令生成的当前林的描述文件是一个文本文件，所以现在可以使用系统中的“记事本”功能对它进行编辑。按下“Ctrl+H”键，在弹出的“替换”对话框中将所有的“esstest.com”替换成新域的名称“sky.cn”，并将NetBIOS的名称也进行相应的更换后，将该文件存盘。
5、接着返回到命令符提示窗口，在命令行中输入“Rendom /upload”命令。这条命令在运行后，域的命名主控会做出一些修改，以便为重命名操作的实际执行做好准备。
提示： upload命令执行的操作和目录因此而发生的变化都是为将来的重命名操作做准备。在本步骤中不对域名进行任何的修改。
6、接着再依次输入“Rendom /prepare”命令和“Rendom /execute”命令。
“Rendom /prepare”命令主要是用于校验连到该域的所有DC是否准备就绪，如果看到有“Successfully”信息，那么则表示连接各DC成功。此外，本测试还对每台DC进行授权情况检查，以确定运行rendom /prepare命令的用户是否得到了授权执行重命名指令。如果用户没有得到“写”授权，命令将失败，并产生一个错误。
“Rendom /execute”命令用于发出正式更改域名的指令，如果看到有“Successfully”的信息，那么表示域的重命名过程成功完成了。
7、在上述命令执行完毕后，系统将会自动关闭重启。此外还必需对域中所有计算机执行两遍手工关机，第一次关机用于使新域成员资格生效；第二次关机则用于将计算机的DNS后缀自动转换为新域名称。
提示：如果DNS后缀没有自动更改，请右击“我的电脑”图标，在弹出的菜单中选择“属性”，切换到“计算机名”选项卡设置界面后，点击“更改”按钮并根据提示操作即可。
8、调整组策略：因为在完成域的重命名应用后，希望组策略中的相关设置能够继续得到应用。所以还需要在命令符提示窗口的命令行中输入如下命令：
gpfixup /olddns:esstest.com /newdns:sky.com /oldnb:SHYZHONG /newnbOVEBOOK /dc:sky.com
9、在执行上述命令后（中间域名部分请自行根据实际情况进行修改），如果看到“Start fixing non-site group policy links”信息，则表示上述命令已经得到了成功执行。
10、删除原域名：
这个操作只需使用“Rendom /clean”命令即可轻松完成从Active Directory中删除原域名的操作了。在成功运行了“Rendom /clean”命令后，新森林便准备就绪，可以进行下一次的森林结构调整工作。这一点只需从“Active Directory 域和信任关系”窗口就可以看出来了。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"seth.dpdns.org/posts/"},{"@type":"ListItem","position":2,"name":"重命名AD网域的方式","item":"seth.dpdns.org/posts/%E9%87%8D%E5%91%BD%E5%90%8Dad%E7%BD%91%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"重命名AD网域的方式","name":"重命名AD网域的方式","description":"网域\n提升域和林的功能级别\n只能重命名其中所有的域控制器都在运行 Windows Server 2003 并且林功能级别已被提升到 Windows Server 2003 的林中的域。\n提升域功能级别\n按下列步骤提升域功能级别：\n1、打开【Active Directory 用户和计算机】。在控制台树中，右键单击【Active Directory 用户和计算机】节点，然后单击【提升域的功能级别】。\n2、在【选择可用的域功能级别】中单击“Windows Server 2003”，然后单击【提升】。\n提升林功能级别\n按下列步骤提升林功能级别：\n1、打开【Active Directory 域和信任关系】。在控制台树中，右键单击【Active Directory 域和信任关系】节点，然后单击【提升林的功能级别】。\n2、在【选择可用的林功能级别】中单击“Windows Server 2003”，然后单击【提升】。\n实现域名更改\n现在我们以将域名esstest.com更改为sky.com为例进行讲解。更改域名需按以下步骤进行：\n1、在DNS中建立新域名的活动目录集成区域-SKY.COM\n2、将Windows Server 2003的安装光盘插入光驱，将“\\VALUEADD\\MSFT\\MGMT”下的DOMREN目录复制到系统的C盘根目录下。\n3、在打开的“命令提示符”窗口中的命令行下使用CD命令进入DOMREN目录后，输入“Rendom /list”命令为当前林生成描述信息（将会使用XML编码结构将信息写入到一个输出文件中，默认文件名为domainlist.xml）。该文件包含了一些列表，列出了林中的所有域和应用程序目录分区，以及它们相应的DNS和NetBIOS名（应用程序目录分区没有NetBIOS名）\n4、因为“Rendom /list”命令生成的当前林的描述文件是一个文本文件，所以现在可以使用系统中的“记事本”功能对它进行编辑。按下“Ctrl+H”键，在弹出的“替换”对话框中将所有的“esstest.com”替换成新域的名称“sky.cn”，并将NetBIOS的名称也进行相应的更换后，将该文件存盘。\n5、接着返回到命令符提示窗口，在命令行中输入“Rendom /upload”命令。这条命令在运行后，域的命名主控会做出一些修改，以便为重命名操作的实际执行做好准备。\n提示： upload命令执行的操作和目录因此而发生的变化都是为将来的重命名操作做准备。在本步骤中不对域名进行任何的修改。\n6、接着再依次输入“Rendom /prepare”命令和“Rendom /execute”命令。\n“Rendom /prepare”命令主要是用于校验连到该域的所有DC是否准备就绪，如果看到有“Successfully”信息，那么则表示连接各DC成功。此外，本测试还对每台DC进行授权情况检查，以确定运行rendom /prepare命令的用户是否得到了授权执行重命名指令。如果用户没有得到“写”授权，命令将失败，并产生一个错误。\n“Rendom /execute”命令用于发出正式更改域名的指令，如果看到有“Successfully”的信息，那么表示域的重命名过程成功完成了。\n7、在上述命令执行完毕后，系统将会自动关闭重启。此外还必需对域中所有计算机执行两遍手工关机，第一次关机用于使新域成员资格生效；第二次关机则用于将计算机的DNS后缀自动转换为新域名称。\n提示：如果DNS后缀没有自动更改，请右击“我的电脑”图标，在弹出的菜单中选择“属性”，切换到“计算机名”选项卡设置界面后，点击“更改”按钮并根据提示操作即可。\n8、调整组策略：因为在完成域的重命名应用后，希望组策略中的相关设置能够继续得到应用。所以还需要在命令符提示窗口的命令行中输入如下命令：\ngpfixup /olddns:esstest.com /newdns:sky.com /oldnb:SHYZHONG /newnbOVEBOOK /dc:sky.com\n9、在执行上述命令后（中间域名部分请自行根据实际情况进行修改），如果看到“Start fixing non-site group policy links”信息，则表示上述命令已经得到了成功执行。\n10、删除原域名：\n这个操作只需使用“Rendom /clean”命令即可轻松完成从Active Directory中删除原域名的操作了。在成功运行了“Rendom /clean”命令后，新森林便准备就绪，可以进行下一次的森林结构调整工作。这一点只需从“Active Directory 域和信任关系”窗口就可以看出来了。\n","keywords":[],"articleBody":"网域\n提升域和林的功能级别\n只能重命名其中所有的域控制器都在运行 Windows Server 2003 并且林功能级别已被提升到 Windows Server 2003 的林中的域。\n提升域功能级别\n按下列步骤提升域功能级别：\n1、打开【Active Directory 用户和计算机】。在控制台树中，右键单击【Active Directory 用户和计算机】节点，然后单击【提升域的功能级别】。\n2、在【选择可用的域功能级别】中单击“Windows Server 2003”，然后单击【提升】。\n提升林功能级别\n按下列步骤提升林功能级别：\n1、打开【Active Directory 域和信任关系】。在控制台树中，右键单击【Active Directory 域和信任关系】节点，然后单击【提升林的功能级别】。\n2、在【选择可用的林功能级别】中单击“Windows Server 2003”，然后单击【提升】。\n实现域名更改\n现在我们以将域名esstest.com更改为sky.com为例进行讲解。更改域名需按以下步骤进行：\n1、在DNS中建立新域名的活动目录集成区域-SKY.COM\n2、将Windows Server 2003的安装光盘插入光驱，将“\\VALUEADD\\MSFT\\MGMT”下的DOMREN目录复制到系统的C盘根目录下。\n3、在打开的“命令提示符”窗口中的命令行下使用CD命令进入DOMREN目录后，输入“Rendom /list”命令为当前林生成描述信息（将会使用XML编码结构将信息写入到一个输出文件中，默认文件名为domainlist.xml）。该文件包含了一些列表，列出了林中的所有域和应用程序目录分区，以及它们相应的DNS和NetBIOS名（应用程序目录分区没有NetBIOS名）\n4、因为“Rendom /list”命令生成的当前林的描述文件是一个文本文件，所以现在可以使用系统中的“记事本”功能对它进行编辑。按下“Ctrl+H”键，在弹出的“替换”对话框中将所有的“esstest.com”替换成新域的名称“sky.cn”，并将NetBIOS的名称也进行相应的更换后，将该文件存盘。\n5、接着返回到命令符提示窗口，在命令行中输入“Rendom /upload”命令。这条命令在运行后，域的命名主控会做出一些修改，以便为重命名操作的实际执行做好准备。\n提示： upload命令执行的操作和目录因此而发生的变化都是为将来的重命名操作做准备。在本步骤中不对域名进行任何的修改。\n6、接着再依次输入“Rendom /prepare”命令和“Rendom /execute”命令。\n“Rendom /prepare”命令主要是用于校验连到该域的所有DC是否准备就绪，如果看到有“Successfully”信息，那么则表示连接各DC成功。此外，本测试还对每台DC进行授权情况检查，以确定运行rendom /prepare命令的用户是否得到了授权执行重命名指令。如果用户没有得到“写”授权，命令将失败，并产生一个错误。\n“Rendom /execute”命令用于发出正式更改域名的指令，如果看到有“Successfully”的信息，那么表示域的重命名过程成功完成了。\n7、在上述命令执行完毕后，系统将会自动关闭重启。此外还必需对域中所有计算机执行两遍手工关机，第一次关机用于使新域成员资格生效；第二次关机则用于将计算机的DNS后缀自动转换为新域名称。\n提示：如果DNS后缀没有自动更改，请右击“我的电脑”图标，在弹出的菜单中选择“属性”，切换到“计算机名”选项卡设置界面后，点击“更改”按钮并根据提示操作即可。\n8、调整组策略：因为在完成域的重命名应用后，希望组策略中的相关设置能够继续得到应用。所以还需要在命令符提示窗口的命令行中输入如下命令：\ngpfixup /olddns:esstest.com /newdns:sky.com /oldnb:SHYZHONG /newnbOVEBOOK /dc:sky.com\n9、在执行上述命令后（中间域名部分请自行根据实际情况进行修改），如果看到“Start fixing non-site group policy links”信息，则表示上述命令已经得到了成功执行。\n10、删除原域名：\n这个操作只需使用“Rendom /clean”命令即可轻松完成从Active Directory中删除原域名的操作了。在成功运行了“Rendom /clean”命令后，新森林便准备就绪，可以进行下一次的森林结构调整工作。这一点只需从“Active Directory 域和信任关系”窗口就可以看出来了。\n","wordCount":"75","inLanguage":"en","datePublished":"2010-05-16T21:32:20+08:00","dateModified":"2010-05-16T21:32:20+08:00","author":{"@type":"Person","name":"Seth"},"mainEntityOfPage":{"@type":"WebPage","@id":"seth.dpdns.org/posts/%E9%87%8D%E5%91%BD%E5%90%8Dad%E7%BD%91%E5%9F%9F%E7%9A%84%E6%96%B9%E5%BC%8F/"},"publisher":{"@type":"Organization","name":"Seth Dang'S","logo":{"@type":"ImageObject","url":"seth.dpdns.org/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=seth.dpdns.org/ accesskey=h title="Seth Dang'S (Alt + H)">Seth Dang'S</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">重命名AD网域的方式</h1><div class=post-meta><span title='2010-05-16 21:32:20 +0800 +0800'>May 16, 2010</span>&nbsp;·&nbsp;Seth</div></header><div class=post-content><p>网域<br>提升域和林的功能级别<br>只能重命名其中所有的域控制器都在运行 Windows Server 2003 并且林功能级别已被提升到 Windows Server 2003 的林中的域。<br>提升域功能级别<br>按下列步骤提升域功能级别：<br>1、打开【Active Directory 用户和计算机】。在控制台树中，右键单击【Active Directory 用户和计算机】节点，然后单击【提升域的功能级别】。<br>2、在【选择可用的域功能级别】中单击“Windows Server 2003”，然后单击【提升】。</p><p>提升林功能级别<br>按下列步骤提升林功能级别：<br>1、打开【Active Directory 域和信任关系】。在控制台树中，右键单击【Active Directory 域和信任关系】节点，然后单击【提升林的功能级别】。<br>2、在【选择可用的林功能级别】中单击“Windows Server 2003”，然后单击【提升】。<br>实现域名更改<br>现在我们以将域名esstest.com更改为sky.com为例进行讲解。更改域名需按以下步骤进行：<br>1、在DNS中建立新域名的活动目录集成区域-SKY.COM</p><p>2、将Windows Server 2003的安装光盘插入光驱，将“\VALUEADD\MSFT\MGMT”下的DOMREN目录复制到系统的C盘根目录下。<br>3、在打开的“命令提示符”窗口中的命令行下使用CD命令进入DOMREN目录后，输入“Rendom /list”命令为当前林生成描述信息（将会使用XML编码结构将信息写入到一个输出文件中，默认文件名为domainlist.xml）。该文件包含了一些列表，列出了林中的所有域和应用程序目录分区，以及它们相应的DNS和NetBIOS名（应用程序目录分区没有NetBIOS名）<br>4、因为“Rendom /list”命令生成的当前林的描述文件是一个文本文件，所以现在可以使用系统中的“记事本”功能对它进行编辑。按下“Ctrl+H”键，在弹出的“替换”对话框中将所有的“esstest.com”替换成新域的名称“sky.cn”，并将NetBIOS的名称也进行相应的更换后，将该文件存盘。<br>5、接着返回到命令符提示窗口，在命令行中输入“Rendom /upload”命令。这条命令在运行后，域的命名主控会做出一些修改，以便为重命名操作的实际执行做好准备。<br>提示： upload命令执行的操作和目录因此而发生的变化都是为将来的重命名操作做准备。在本步骤中不对域名进行任何的修改。</p><p>6、接着再依次输入“Rendom /prepare”命令和“Rendom /execute”命令。<br>“Rendom /prepare”命令主要是用于校验连到该域的所有DC是否准备就绪，如果看到有“Successfully”信息，那么则表示连接各DC成功。此外，本测试还对每台DC进行授权情况检查，以确定运行rendom /prepare命令的用户是否得到了授权执行重命名指令。如果用户没有得到“写”授权，命令将失败，并产生一个错误。</p><p>“Rendom /execute”命令用于发出正式更改域名的指令，如果看到有“Successfully”的信息，那么表示域的重命名过程成功完成了。</p><p>7、在上述命令执行完毕后，系统将会自动关闭重启。此外还必需对域中所有计算机执行两遍手工关机，第一次关机用于使新域成员资格生效；第二次关机则用于将计算机的DNS后缀自动转换为新域名称。</p><p>提示：如果DNS后缀没有自动更改，请右击“我的电脑”图标，在弹出的菜单中选择“属性”，切换到“计算机名”选项卡设置界面后，点击“更改”按钮并根据提示操作即可。</p><p>8、调整组策略：因为在完成域的重命名应用后，希望组策略中的相关设置能够继续得到应用。所以还需要在命令符提示窗口的命令行中输入如下命令：<br>gpfixup /olddns:esstest.com /newdns:sky.com /oldnb:SHYZHONG /newnbOVEBOOK /dc:sky.com</p><p>9、在执行上述命令后（中间域名部分请自行根据实际情况进行修改），如果看到“Start fixing non-site group policy links”信息，则表示上述命令已经得到了成功执行。<br>10、删除原域名：<br>这个操作只需使用“Rendom /clean”命令即可轻松完成从Active Directory中删除原域名的操作了。在成功运行了“Rendom /clean”命令后，新森林便准备就绪，可以进行下一次的森林结构调整工作。这一点只需从“Active Directory 域和信任关系”窗口就可以看出来了。</p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=seth.dpdns.org/>Seth Dang'S</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>